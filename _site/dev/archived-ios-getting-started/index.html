<!DOCTYPE html>
<html>
<head>
	<title>Quickstart for iOS</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta http-equiv="imagetoolbar" content="false">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<meta name="author" content="Artisan Mobile" />
	<meta name="description" content="Getting started with the Artisan MEM platform for developers." />
	<meta name="keywords" content="" />

	<meta name="twitter:card" content="summary" />
	<meta name="twitter:url" content="http://dev.useartisan.com" />
	<meta name="twitter:title" content="Quickstart for iOS" />
	<meta name="twitter:description" content="Getting started with the Artisan MEM platform for developers." />
	<meta name="twitter:site" content="@artisanmobile" />
	<meta name="twitter:image" content="http://dev.useartisan.com/images/twitter-card-image.png" />

	<meta property="og:site_name" content="Artisan Developers" />
	<meta property="og:title" content="Quickstart for iOS" />
	<meta property="og:type" content="article" />
	<meta property="og:article:author" content="Kevin M. Jackson" />
	<meta property="og:url" content="http://dev.useartisan.com" />
  
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script src="/js/waypoints.min.js"></script>
	<script src="/js/waypoints-sticky.min.js"></script>
	<script type="text/javascript" src="//use.typekit.net/zqm4dpz.js"></script>
	<script type="text/javascript">try{Typekit.load();}catch(e){}</script>

	<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.2.0/base-min.css">
	<link rel="stylesheet" href="/docs.css?1392841087" type="text/css" media="screen" charset="utf-8">
</head>
<body>
<div id="header-wrapper">
	<nav>
		<ul id="primary-nav">
			<li><a href="/" title="" id="logo">
				<svg version="1.1" id="icon" fill="#ffffff" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="36px" width="36px" viewBox="0 0 144 144">
					<g>
						<path d="M11.001,97.171c12.574,0,21.169-8.989,26.592-14.575c-0.685,1.268-1.76,3.106-2.028,7.13c-0.343,5.146,2.883,7.41,6.523,7.41c11.756,0,21.49-15.313,26.176-20.028c3.151-3.17,4.429-3.686,7.166-3.686c1.515,0,2,1.4,2,2.468c0,4.489-7.395,10.992-7.395,15.779c0,3.286,2.102,5.503,7.392,5.503c8.67,0,16.73-7.361,18.731-9.294c-1.73,5.709,0.668,9.294,5.901,9.294c6.934,0,16.543-6.328,18.671-9.255c-0.95,4.409,0.461,9.255,6.01,9.255c5.165,0,10.585-3.469,17.261-9.328v-7.124c-5.301,4.903-9.864,8.877-12.489,8.877c-0.8,0-1.143-0.692-1.143-1.291c0-3.854,10.28-16.128,10.28-20.655c0-2.051-1.667-2.798-3.652-2.79c-2.535,0.01-4.433,0.689-6.143,2.992c-2.146,2.889-4.721,7.375-7.858,10.804c-5.518,6.033-11.253,10.61-14.825,10.61c-1.327,0-1.755-0.771-1.755-1.846c0-4.734,6.176-14.089,10.587-21.646c2.807,0.052,4.836,0.116,5.122,0.116c1.937,0,4.656-0.839,4.656-3.007c0-1.772-1.272-2.949-3.701-2.949c-0.142,0-1.253,0.032-2.968,0.069c0.773-1.667,1.249-3.067,1.249-4.053c0-2.164-0.864-4.023-3.485-3.974c-2.524,0.047-5.582,2.392-8.99,8.136c-5.198-0.027-10.569-0.179-11.096-0.178c-2.483,0-4.674,0.907-4.674,3.094c0,2.082,1.188,2.863,3.499,2.863c0.334,0,4.361-0.109,9.246-0.159c-1.829,3.412-4.306,7.692-7.173,11.688c-4.651,6.479-11.596,11.916-15.848,11.916c-1.344,0-1.607-0.869-1.607-1.723c0-3.468,8.203-11.075,8.203-17.023c0-4.28-4.111-5.701-9.468-5.701c-7.307,0-10.27,1.476-15.537,8.155c-6.085,7.717-14.254,15.772-16.664,15.772c-0.734,0-0.69-1.003-0.645-1.334c0.647-4.726,8.411-14.897,8.756-20.074c0.286-4.287-5.133-5.817-9.356-2.197c-0.778,0.667-20.761,23.426-30.816,23.426c-2.227,0-3.5-1.071-3.5-4.08c0-10.111,15.907-30.34,33.532-30.34c8.127,0,8.339,1.667,12.401,1.667c2.846,0,4.268-1.581,4.268-3.371c0-5.239-6.555-5.683-11.577-5.683C27.471,46.829,0,67.646,0,85.769C0,94.921,6.029,97.171,11.001,97.171z"/>
						<path d="M138.128,55.695c0,2.164,1.623,4.103,4.181,4.103c0.596,0,1.161-0.063,1.691-0.179V50.15c-0.059-0.002-0.108-0.015-0.168-0.015C141.424,50.135,138.128,51.694,138.128,55.695z"/>
					</g>
					<path d="M141,3v138H3V3H141 M144,0H0v144h144V0L144,0z"/>
				</svg>
			</a></li>
			<li><a href="/user-guide" title="">Getting Started</a></li>
			<li><a href="/dev/ios/install" title="">iOS Developers</a></li>
			<li><a href="/dev/android/install" title="">Android Developers</a></li>
		</ul>

		<ul id="extra-links">
			<li><a href="http://useartisan.com" title="">Artisan Home</a></li>
			<li><a href="http://useartisan.com/blog" title="">Blog</a></li>
		</ul>
	</nav>
</div>
<div id="main">
  <div class="main-wrapper">
    <section>
      <aside id="category-nav">
        <div id="nav-wrapper">
          





        </div>
      </aside>
      <article>
        <h1 id="artisan-quickstart-guide-for-ios">Artisan Quickstart Guide for iOS</h1>

<h2 id="install-sdk">Install SDK</h2>

<p>1. Download the Artisan SDK</p>

<p>2. Unzip the distribution. It should contain two files:</p>

<ul>
  <li>ArtisanSDK.bundle</li>
  <li>ArtisanSDK.framework</li>
</ul>

<p>3. Import these two files into your XCode project by dragging them into the Project Navigator on the left-hand side.</p>

<p>4. Confirm that the Artisan files have been imported properly by executing the following :</p>

<ul>
  <li>Navigate to your project build settings by selecting your project's Project File in the Project Navigator</li>
  <li>Select the main build target for your app</li>
  <li>Select the 'Build Phases' task</li>
  <li>Confirm that 'ArtisanSDK.framework' is in the 'Link Binary With Libraries' Section</li>
  <li>Confirm that 'ArtisanSDK.bundle' are in the 'Copy Bundle Resources' section</li>
</ul>

<p>5. Ensure these system frameworks are included in the 'Link Binary With Libraries' section of your app:</p>

<ul>
  <li>CoreLocation.framework</li>
  <li>SystemConfiguration.framework</li>
  <li>QuartzCore.framework</li>
  <li>Security.framework</li>
  <li>CFNetwork.framework</li>
  <li>CoreData.framework</li>
  <li>libz.dylib</li>
</ul>

<p>For any that aren't included, select the '+' icon in the lower-left corner of that section and select it from the popup window.</p>

<p>6. Ensure your project has the correct build settings by executing the following:</p>

<ul>
  <li>Navigate to the 'Build Settings' tab of your project build settings.</li>
  <li>Navigate to 'Other Linker Flags'</li>
  <li>Ensure that '-ObjC' is included as an entry in 'Other Linker Flags' for all environments</li>
</ul>

<div class="note note-hint">
  <p>Hint: Read more about the -ObjC linker flag in Apple's <a href="https://developer.apple.com/library/mac/qa/qa1490/_index.html" target="_blank">Technical Article Building Objective-C static libraries with categories</a>.</p>
</div>

<p>7. Navigate to the main App Delegate class for your project.</p>

<p>8. Add the following import statement to the top of the .m file for the App Delegate:</p>

<div class="highlight"><pre><code class="objective-c"><span class="cp">#import &lt;ArtisanSDK/ArtisanSDK.h&gt;</span></code></pre></div>

<div class="note note-important">
  <p>Important: The ArtisanSDK import line should be included in your App .pch file or at the top of each class where you reference the Artisan SDK.</p>
</div>

<p>9. Add the following line to the bottom of the <strong>didFinishLaunchingWithOptions:</strong> method of the AppDelegate.</p>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARManager</span> <span class="n">startWithAppId</span><span class="o">:</span><span class="s">@&quot;YOURAPPID&quot;</span><span class="p">];</span></code></pre></div>

<div class="note note-important">
  <p>Important: Make sure to fill in the parameter **startWithAppId** with your AppID, provided by us. You can find your AppID either in the url of your application page, or in the settings sections of your application.</p>
</div>

<p>10. Build your app as normal.</p>

<p>You should now be able to build your app and successfully connect it to artisantools.com to begin building your first experiment.</p>

<div id="api"></div>
<p>##Analytics</p>

<p>Artisan automatically collects analytics events for every user, session, page view, tap and other user interactions. There’s nothing you need to add to your app to capture those events. But, there are times when you want to capture an event that doesn’t correspond directly to a tap or navigation, or maybe you want to capture more information with a particular tap or event. To capture these custom analytics events we have the ARTrackingManager class in our API.</p>

<p>ARTrackingManager manages all in-code custom analytics tracking designed for use with Artisan.</p>

<p>The <strong>trackEvent:</strong> and <strong>trackEvent:parameters</strong> methods allow you to track an event by name.</p>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARTrackingManager</span> <span class="n">trackEvent</span><span class="o">:</span><span class="s">@&quot;itemsInCartAreNowOutofStock&quot;</span><span class="p">];</span></code></pre></div>

<p>with an optional dictionary of name/value pairs.</p>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARTrackingManager</span> <span class="n">trackEvent</span><span class="o">:</span><span class="s">@&quot;itemsInCartAreNowOutofStock&quot;</span> <span class="n">parameters</span><span class="o">:</span><span class="err">@</span><span class="p">{</span><span class="s">@&quot;numberOfItems&quot;</span><span class="o">:</span><span class="s">@&quot;2&quot;</span><span class="p">}];</span></code></pre></div>

<h2 id="user-profile">User Profile</h2>

<p>ARProfileManager is a singleton that is automatically initialized when your app starts. Use ARProfileManager to manage the personalization profile for the current user from app inception to completion.</p>

<div class="note note-hint">
  <p>Hint: Valid characters for this name include [0-9], [a-z], [A-Z], -, and _. Any other characters will automatically be stripped out.</p>
</div>

<h3 id="register-user-profile-variables">Register User Profile Variables</h3>

<p>Convenience methods existing for registering numbers, strings, dates, and locations. The value can optionally be set during the registration of the User Profile Variable.</p>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARProfileManager</span> <span class="n">registerNumber</span><span class="o">:</span><span class="s">@&quot;currentCartTotal&quot;</span> <span class="n">withValue</span><span class="o">:</span><span class="p">[</span><span class="n">NSNumber</span> <span class="n">numberWithDouble</span><span class="o">:</span><span class="mi">0</span><span class="p">]];</span>
<span class="p">[</span><span class="n">ARProfileManager</span> <span class="n">registerString</span><span class="o">:</span><span class="s">@&quot;memberType&quot;</span> <span class="n">withValue</span><span class="o">:</span><span class="s">@&quot;unknown&quot;</span><span class="p">];</span>

<span class="p">[</span><span class="n">ARProfileManager</span> <span class="n">registerDateTime</span><span class="o">:</span><span class="s">@&quot;lastPurchase&quot;</span><span class="p">];</span>
<span class="p">[</span><span class="n">ARProfileManager</span> <span class="n">registerLocation</span><span class="o">:</span><span class="s">@&quot;lastKnownLocation&quot;</span><span class="p">];</span></code></pre></div>

<h3 id="update-user-profile-variables">Update User Profile Variables</h3>
<p>The updating of the User Profile Variable can be accomplished by calling the matching setter for the User Variable Variable data type.</p>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARProfileManager</span> <span class="n">setNumberValue</span><span class="o">:</span><span class="p">[</span><span class="n">NSNumber</span> <span class="n">numberWithDouble</span><span class="o">:</span><span class="mf">150.00</span><span class="p">]</span> <span class="n">forVariable</span><span class="o">:</span><span class="s">@&quot;currentCartTotal&quot;</span><span class="p">];</span>
<span class="p">[</span><span class="n">ARProfileManager</span> <span class="n">setStringValue</span><span class="o">:</span><span class="s">@&quot;platinum&quot;</span> <span class="n">forVariable</span><span class="o">:</span><span class="s">@&quot;memberType&quot;</span><span class="p">];</span>

<span class="p">[</span><span class="n">ARProfileManager</span> <span class="n">setDateTimeValue</span><span class="o">:</span><span class="p">[</span><span class="n">NSDate</span> <span class="n">new</span><span class="p">]</span> <span class="n">forVariable</span><span class="o">:</span><span class="s">@&quot;lastPurchase&quot;</span><span class="p">];</span>
<span class="p">[</span><span class="n">ARProfileManager</span> <span class="n">setLocationValue</span><span class="o">:</span><span class="n">CLLocationCoordinate2DMake</span><span class="p">(</span><span class="mf">39.949934</span><span class="p">,</span> <span class="o">-</span><span class="mf">75.145012</span><span class="p">)</span> <span class="n">forVariable</span><span class="o">:</span><span class="s">@&quot;lastKnownLocation&quot;</span><span class="p">];</span></code></pre></div>

<h3 id="clear-user-profile-variables">Clear User Profile Variables</h3>
<p>The <strong>clearProfile:</strong> method will clear out the values associated with the registered User Profile Variables.</p>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARProfileManager</span> <span class="n">clearProfile</span><span class="p">];</span></code></pre></div>

<h3 id="setting-the-shared-user-id">Setting the shared user Id</h3>
<p>The <strong>sharedUserId</strong> User Profile Variable is used to uniquely indentify an app user.</p>

<div class="note note-important">
  <p>Important: The sharedUserId should NOT be any of the following: email address, phone number, or social security number.  The sharedUserId should uniquely identify the user in your system.</p>
</div>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARProfileManager</span> <span class="n">setSharedUserId</span><span class="o">:</span><span class="s">@&quot;624597b0e106e732a3204001&quot;</span><span class="p">];</span></code></pre></div>

<h3 id="user-profile-variables-for-advanced-targeting">User Profile Variables for Advanced Targeting</h3>
<p>The methods <strong>setGender:</strong>, <strong>setUserAge:</strong>, and <strong>setUserAddress:</strong> can all be used for Advanced Targeting in Optimize.  These dimensions can also be used for creating segments and reporting.</p>

<p>The <strong>setGender:</strong> method expects one of the following values: ARGenderFemale, ARGenderMale, ARGenderNA or nil;</p>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARProfileManager</span> <span class="n">setGender</span><span class="o">:</span><span class="n">ARGenderFemale</span><span class="p">];</span></code></pre></div>

<p>The <strong>setUserAge:</strong> method expects a NSNumber object with an integer value or nil.</p>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARProfileManager</span> <span class="n">setUserAge</span><span class="o">:</span><span class="p">[</span><span class="n">NSNumber</span> <span class="n">numberWithInteger</span><span class="o">:</span><span class="mi">22</span><span class="p">]];</span></code></pre></div>

<p>The <strong>setUserAddress:</strong> method expects a String.</p>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARProfileManager</span> <span class="n">setUserAddress</span><span class="o">:</span><span class="s">@&quot;1 Lincoln Financial Field Way, Philadelphia, PA 19147&quot;</span><span class="p">];</span></code></pre></div>

<div id="power-hooks"></div>
<p>##Power Hooks</p>

<p>Power Hooks are key-value pairs or code blocks with key-value arguments that are passed into your application code by Artisan when your app starts, allowing for settings, text, and logic to be modified on the fly for all user devices without revisioning or updating your application.</p>

<p>All hooks are created using ARPowerHookManager are automatically registered with the Artisan platform when you connect your device to for the first time. The registration process will detect all registered hook keys, and will display all of the hook variables and code blocks for this app in Artisan where they can be edited.  Values set on hooks on the web will automatically be downloaded by all devices upon app startup, allowing for their usage throughout your system code.</p>

<h3 id="power-hook-variables">Power Hook Variables</h3>

<p>Register a single-value Power Hook for use with Artisan.</p>

<p>Use the method <strong>registerHookWithId:friendlyName:defaultValue:</strong> to declare the existence of a Power Hook you would like to pass in from Artisan.</p>

<div class="highlight"><pre><code class="objective-c"><span class="c1">// this should go in didFinishLaunchingWithOptions: in your app delegate before ARManager startWithAppId:</span>
<span class="p">[</span><span class="n">ARPowerHookManager</span> <span class="n">registerHookWithId</span><span class="o">:</span><span class="s">@&quot;marketingMessage&quot;</span> <span class="n">friendlyName</span><span class="o">:</span><span class="s">@&quot;Marketing Message in Banner&quot;</span> <span class="n">defaultValue</span><span class="o">:</span><span class="s">@&quot;It&#39;s So Good!&quot;</span><span class="p">];</span></code></pre></div>

<div class="note note-important">
  <p>Important: This declaration should occur in the **didFinishLaunchingWithOptions:** method of your main app delegate, **before** you start Artisan using the [ARManager startWithAppId:] method.</p>
</div>

<p>The method <strong>getValueForHookById:</strong> retrieves the value of a Power Hook from Artisan.  This will return the value specified in the Artisan platform, or the default value if none has been specified.</p>

<div class="highlight"><pre><code class="objective-c"><span class="n">NSString</span> <span class="o">*</span><span class="n">marketingMessage</span> <span class="o">=</span> <span class="p">[</span><span class="n">ARPowerHookManager</span> <span class="n">getValueForHookById</span><span class="o">:</span><span class="s">@&quot;marketingMessage&quot;</span><span class="p">];</span></code></pre></div>

<div class="note note-hint">
  <p>HINT: Each time your code passes over a **getValueForHookById:** method call the most recently downloaded value to the user's device will be referenced.  If you do not want the value to change during the life-cycle of the object you can assign the value to a property or member variable in the object's constructor.</p>
</div>

<p>As an alternative to getting the value one time you can also get a reference to an ARPowerHookVariable that you can then get the value from. It will always have the most recently downloaded value from Artisan. If you would like to be notified when this value changes see the section on <a href="#power-hook-callbacks">Power Hook Callbacks</a> below.</p>

<div class="highlight"><pre><code class="objective-c"><span class="n">ARPowerHookVariable</span> <span class="o">*</span><span class="n">marketingMessageVariable</span> <span class="o">=</span> <span class="p">[</span><span class="n">ARPowerHookManager</span> <span class="n">getPowerHookVariable</span><span class="o">:</span><span class="s">@&quot;marketingMessage&quot;</span><span class="p">];</span>
    <span class="n">NSString</span> <span class="o">*</span><span class="n">marketingMessage</span> <span class="o">=</span> <span class="n">marketingMessageVariable</span><span class="p">.</span><span class="n">value</span><span class="p">;</span></code></pre></div>

<h3 id="power-hook-code-blocks">Power Hook Code Blocks</h3>

<p>Use this method to declare the existence of a code block you would like to use in your app with data that is configurable from Artisan.</p>

<p>This declaration should occur in the <strong>didFinishLaunchingWithOptions:</strong> method of your main app delegate, <em>before</em> you start Artisan using the [ARManager startWithAppId:] method.</p>

<ul>
  <li><strong>id</strong> - The name of the code to register. Name must be unique for this app.</li>
  <li><strong>friendlyName</strong> - The name for this code block that will be displayed in Artisan Tools.</li>
  <li><strong>data</strong> - The default data for this code block. This should be string keys and string values. This data will be used if no data is passed in from ArtisanTools.com for this code block for this app.</li>
  <li><strong>andBlock</strong> - The block of code executed.</li>
</ul>

<div class="note note-important">
  <p>Hint: The data parameter contains name/value pairs that are private to the Power Hook Code Block.</p>
</div>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARPowerHookManager</span> <span class="n">registerBlockWithId</span><span class="o">:</span><span class="s">@&quot;discountPopup&quot;</span>
                           <span class="nl">friendlyName:</span><span class="s">@&quot;discount popup&quot;</span>
                                   <span class="nl">data:</span><span class="err">@</span><span class="p">{</span> <span class="s">@&quot;shouldDisplayAlert&quot;</span> <span class="o">:</span> <span class="s">@&quot;NO&quot;</span><span class="p">,</span>
                                           <span class="s">@&quot;name&quot;</span> <span class="o">:</span> <span class="s">@&quot;value1&quot;</span><span class="p">,</span>
                                           <span class="s">@&quot;discountAmount&quot;</span> <span class="o">:</span> <span class="s">@&quot;value2&quot;</span>
                                         <span class="p">}</span>
                               <span class="nl">andBlock:</span><span class="o">^</span><span class="p">(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="kt">id</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">([</span><span class="n">data</span><span class="p">[</span><span class="s">@&quot;shouldDisplayAlert&quot;</span><span class="p">]</span> <span class="n">isEqualToString</span><span class="o">:</span><span class="s">@&quot;YES&quot;</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">NSString</span> <span class="o">*</span><span class="n">message</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="n">stringWithFormat</span><span class="o">:</span><span class="s">@&quot;Hello there, %@! We&#39;d like to give you a discount of %@ on %@&quot;</span><span class="p">,</span>
                           <span class="n">data</span><span class="p">[</span><span class="s">@&quot;name&quot;</span><span class="p">],</span>
                           <span class="n">data</span><span class="p">[</span><span class="s">@&quot;discountAmount&quot;</span><span class="p">],</span>
                           <span class="n">data</span><span class="p">[</span><span class="s">@&quot;product&quot;</span><span class="p">]];</span>
        <span class="n">UIAlertView</span> <span class="o">*</span><span class="n">alertView</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIAlertView</span> <span class="n">alloc</span><span class="p">]</span><span class="n">initWithTitle</span><span class="o">:</span><span class="s">@&quot;Here&#39;s a Coupon!&quot;</span>
                                                          <span class="nl">message:</span><span class="n">message</span>
                                                        <span class="nl">delegate:</span><span class="n">context</span>
                                                <span class="nl">cancelButtonTitle:</span><span class="s">@&quot;Cancel&quot;</span>
                                                <span class="nl">otherButtonTitles:</span><span class="s">@&quot;Ok&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">];</span>
        <span class="p">[</span><span class="n">alertView</span> <span class="n">show</span><span class="p">];</span>
      <span class="p">}</span>
<span class="p">}];</span></code></pre></div>

<p>Use the method <strong>executeBlockWithId:data:context</strong> to execute a Power Hook code block from Artisan. The code block will use the values specified in the data parameter registered in ArtisanTools.com to execute the block. You can override the default data using ArtisanTools.com.</p>

<p>Power Hook code blocks can be used for referencing code that can be executed conditionally. Examples are displaying a modal popup to remind the user to perform certain actions in the app, managing the logic for applying a discount code, or displaying a survey to a segment of users.</p>

<ul>
  <li><strong>id</strong> - The name of the code to register. Name must be unique for this app.</li>
  <li><strong>data</strong> - The default data for this code block. This should be string keys and values. This data will be used if no data is passed in from ArtisanTools.com for this code block for this app.</li>
  <li><strong>context</strong> - A reference to an object passed into the block.</li>
</ul>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARPowerHookManager</span> <span class="n">executeBlockWithId</span><span class="o">:</span><span class="s">@&quot;discountPopup&quot;</span>
                                  <span class="nl">data:</span><span class="nb">nil</span>
                               <span class="nl">context:</span><span class="n">self</span><span class="p">];</span></code></pre></div>

<div class="note note-hint">
  <p><strong>Hint:</strong> Passing a reference to a UIViewController for the context parameter enables a registered block to transition to a new screen.  This enables the injection of a new screen into an existing workflow.</p>
</div>

<div id="power-hook-callbacks"></div>
<p>##Power Hook Callbacks</p>

<p>When new Power Hook values come down from Artisan you might want the option to change sometihng in your app immediately rather than waiting for the view controller to disappear and appear again.</p>

<p>You can register callbacks for when an individual power hook changes or when any power hook changes. This is typically done in one of your view controllers.</p>

<h3 id="when-individual-power-hook-values-change">When individual Power Hook Values change</h3>
<p>For individual Power Hook values you can get a reference to an ARPowerHookVariable to register a callback for when the value is updated.</p>

<div class="highlight"><pre><code class="objective-c"><span class="k">@interface</span> <span class="nc">MYSampleViewController</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="n">ARPowerHookVariable</span> <span class="o">*</span><span class="n">marketingMessageVariable</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">MYSampleViewController</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span> <span class="p">{</span>
  <span class="c1">// get a reference to the ARPowerHookVariable</span>
  <span class="n">marketingMessageVariable</span> <span class="o">=</span> <span class="p">[</span><span class="n">ARPowerHookManager</span> <span class="n">getPowerHookVariable</span><span class="o">:</span><span class="s">@&quot;marketingMessage&quot;</span><span class="p">];</span>
<span class="p">}</span></code></pre></div>

<p>Here is an example of registering a callback with the “marketingMessage” Power Hook value changes.</p>

<div class="highlight"><pre><code class="objective-c"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewWillAppear:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">animated</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">marketingMessageVariable</span> <span class="n">onPowerHookChanged</span><span class="o">:^</span><span class="p">(</span><span class="kt">BOOL</span> <span class="n">previewMode</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">previewMode</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// you might only want to change a value on the screen if you are in Artisan previewMode</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;In Preview Mode! Updated Marketing Message is: %@&quot;</span><span class="p">,</span> <span class="n">marketingMessageVariable</span><span class="p">.</span><span class="n">value</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Updated Marketing Message is: %@&quot;</span><span class="p">,</span> <span class="n">marketingMessageVariable</span><span class="p">.</span><span class="n">value</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}];</span>
<span class="p">}</span></code></pre></div>

<p>Artisan provides a previewMode flag to tell you if you are currently in <a href="#preview-mode">Artisan Preview Mode</a>, previewing unpublished changes for your App. For example, you may want to only change text on the screen immediately if you are in previewMode. This will make it easier to preview Power Hook values in your app while you are considering changes in Artisan Tools.</p>

<div class="note note-hint">
  <p><strong>A NOTE ON THREADING:</strong> The thread calling the block of code is guaranteed to be the main thread.  If the code inside of the block requires executing on a background thread you will need to implement this logic.</p>
</div>

<p>To avoid memory leaks, it is important that you also unregister your callback in the parallel method to the one in which you registered it. For example, if you registered in <strong>viewWillAppear</strong> it is best to unregister in <strong>viewWillDisappear</strong>.</p>

<div class="highlight"><pre><code class="objective-c"><span class="k">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">viewWillDisappear:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">animated</span> <span class="p">{</span>
  <span class="p">[</span><span class="n">marketingMessageVariable</span> <span class="n">unregisterPowerHookChanged</span><span class="p">];</span>
<span class="p">}</span></code></pre></div>

<h3 id="when-any-power-hook-value-changes">When any Power Hook Value changes</h3>

<p>If there are many power hooks that are used on an individual screen it may make sense to add a callback for when any power hook changes. Here is an example:</p>

<p>Just as with the individual power hook value callbacks you have the previewMode flag to tell you if you are currently in <a href="#preview-mode">Artisan Preview Mode</a>, previewing unpublished changes for your App.</p>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARPowerHookManager</span> <span class="n">onPowerHooksChanged</span><span class="o">:^</span><span class="p">(</span><span class="kt">BOOL</span> <span class="n">previewMode</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">previewMode</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// you might only want to change a value on the screen if you are in Artisan previewMode</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;In Preview Mode! Power Hooks Changed!&quot;</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Power Hooks Changed!&quot;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}];</span></code></pre></div>

<div class="note note-hint">
  <p><strong>A NOTE ON THREADING:</strong> The thread calling the block of code is guaranteed to be the main thread.  If the code inside of the block requires executing on a background thread you will need to implement this logic.</p>
</div>

<div id="preview-mode"></div>
<p>##Artisan Preview Mode</p>

<p>When making changes to Power Hook values you can preview the look and behavior of your application with the new values by clicking on the gear <img src="/images/gear-icon.png" /> and selecting “Preview”.</p>

<h3 id="preview-from-the-power-hook-page">Preview from the Power Hook Page</h3>

<p>You can preview the default, current and draft values for your app’s Power Hooks.</p>

<p><img src="/images/preview-mode-power-hook-page.png" /></p>

<h3 id="preview-from-any-power-hook-experiment">Preview from any Power Hook Experiment</h3>

<p>You can preview any variation of your experiment.</p>

<p><img src="/images/preview-mode-experiment-preview.png" /></p>

<h3 id="exiting-preview-mode">Exiting Preview Mode</h3>

<p>You can exit Preview Mode by closing the modal in your browser.</p>

<p><img src="/images/preview-mode-modal.png" /></p>

<p>If you background and foreground your app while you are in preview mode you will be disconnected from Artisan Tools, but you will remain in preview mode and your changes will still be active when the app starts again.</p>

<p>You can then exit preview mode by tapping the preview icon on your device <img src="/images/preview-mode-indicator.png" /> and selecting “Exit Preview Mode”</p>

<p><img src="/images/preview-mode-device.png" />    <img src="/images/preview-mode-device-exit.png" /></p>

<div id="in-code"></div>
<p>##In-code Experiments</p>

<p>In-code Experiments allow you to build tests around business logic inside your app.  For example, you can create a test for showing or not showing a particular screen.  Another example is testing multiple workflows.</p>

<p>An in-code experiments must be defined in the appDelegate before the startWithAppId:version:options: line.</p>

<p>The method registerExperiment: takes a string representing the name of your experiment.</p>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARExperimentManager</span> <span class="n">registerExperiment</span><span class="o">:</span><span class="s">@&quot;Cart Process&quot;</span><span class="p">];</span></code></pre></div>

<p>Next, register each variant by name with the experiment.</p>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARExperimentManager</span> <span class="n">addVariant</span><span class="o">:</span><span class="s">@&quot;Skip Product Screen&quot;</span> <span class="n">forExperiment</span><span class="o">:</span><span class="s">@&quot;Cart Process&quot;</span><span class="p">];</span>
<span class="p">[</span><span class="n">ARExperimentManager</span> <span class="n">addVariant</span><span class="o">:</span><span class="s">@&quot;Don&#39;t Skip Product Screen&quot;</span> <span class="n">forExperiment</span><span class="o">:</span><span class="s">@&quot;Cart Process&quot;</span> <span class="n">isDefault</span><span class="o">:</span><span class="nb">YES</span><span class="p">];</span></code></pre></div>

<div class="note note-important">
  <p>Important: If the experiment is not running the default variant will be selected.</p>
</div>

<p>Call the method <strong>setExperimentViewedForExperiment:</strong> to mark the experiment has been viewed for the current user session.  This call should be made at the location within the code where you want to mark the experiment as viewed.</p>

<p>Use the method <strong>isCurrentVariant:forExperiment:</strong> to determine which experiment variation is active.</p>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARExperimentManager</span> <span class="n">setExperimentViewedForExperiment</span><span class="o">:</span><span class="s">@&quot;Cart Process&quot;</span><span class="p">];</span>

<span class="k">if</span> <span class="p">([</span><span class="n">ARExperimentManager</span> <span class="n">isCurrentVariant</span><span class="o">:</span><span class="s">@&quot;Skip Product Screen&quot;</span> <span class="n">forExperiment</span><span class="o">:</span><span class="s">@&quot;Cart Process&quot;</span><span class="p">])</span> <span class="p">{</span>
  <span class="n">ARPCartModel</span> <span class="o">*</span><span class="n">cart</span> <span class="o">=</span> <span class="p">[</span><span class="n">ARPCartModel</span> <span class="n">instance</span><span class="p">];</span>
  <span class="p">[</span><span class="n">cart</span> <span class="n">addProduct</span><span class="o">:</span><span class="n">productClicked</span><span class="p">];</span>
  <span class="p">[</span><span class="n">self</span> <span class="n">performSegueWithIdentifier</span><span class="o">:</span><span class="s">@&quot;navigateToCart&quot;</span> <span class="n">sender</span><span class="o">:</span><span class="n">self</span><span class="p">];</span>
<span class="p">}</span>
<span class="k">else</span><span class="p">{</span>
  <span class="c1">// Don&#39;t Skip Product Screen</span>

  <span class="n">ARPProductDetailViewController</span> <span class="o">*</span><span class="n">detailViewContoller</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">storyboard</span> <span class="n">instantiateViewControllerWithIdentifier</span><span class="o">:</span><span class="s">@&quot;ProductDetail&quot;</span><span class="p">];</span>
  <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">navigationController</span> <span class="n">pushViewController</span><span class="o">:</span><span class="n">detailViewContoller</span> <span class="n">animated</span><span class="o">:</span><span class="nb">YES</span><span class="p">];</span>
<span class="p">}</span></code></pre></div>

<div class="note note-hint">
  <p>Hint: The logic for choosing the variant should generally be in the viewWillAppear: method of your UIViewController class or in a location where the code will be exercised each time the screen is displayed.  This is necessary so the test can be turned on and off without requiring the rebuilding of the screen.</p>
</div>

<p>To set the goal of an in-code experiment you call the <strong>setTargetReachedForExperiment:description:</strong> method.  This call should be made at the location within the code where you want to mark the goal as achieved.</p>

<div class="highlight"><pre><code class="objective-c"><span class="p">[</span><span class="n">ARExperimentManager</span> <span class="n">setTargetReachedForExperiment</span><span class="o">:</span><span class="s">@&quot;Cart Process&quot;</span> <span class="n">description</span><span class="o">:</span><span class="s">@&quot;Reached the Checkout Screen.&quot;</span><span class="p">];</span></code></pre></div>

<div id="playlist-callbacks"></div>
<p>##Artisan Playlist Callbacks</p>

<p>When your app is started Artisan will fetch the latest changes from the Artisan Service. If you would like to hold up your app and wait for that first playlist to be downloaded, you can use the ARManager <strong>onFirstPlaylistDownloaded:withTimeout:</strong> method.</p>

<p>This call is non-blocking so code execution will continue immediately to the next line of code.</p>

<p>Here is an example where I wait for no more than 3 seconds for the first playlist to download:</p>

<div class="highlight"><pre><code class="objective-c"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span> <span class="p">{</span>
    <span class="n">waitingViewController</span> <span class="o">=</span> <span class="p">[[</span><span class="n">MYSampleWaitingViewController</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>

    <span class="p">[</span><span class="n">self</span> <span class="n">presentViewController</span><span class="o">:</span><span class="n">waitingViewController</span> <span class="n">animated</span><span class="o">:</span><span class="nb">NO</span> <span class="n">completion</span><span class="o">:</span><span class="nb">nil</span><span class="p">];</span>

    <span class="n">__block</span> <span class="n">MYSampleHomeScreenViewController</span> <span class="o">*</span><span class="n">_self</span> <span class="o">=</span> <span class="n">self</span><span class="p">;</span>

    <span class="p">[</span><span class="n">ARManager</span> <span class="n">onFirstPlaylistDownloaded</span><span class="o">:^</span><span class="p">{</span>
        <span class="c1">// this will be executed when the first playlist is downloaded or after 3 seconds, which ever is first.</span>
        <span class="p">[</span><span class="n">_self</span> <span class="n">hideWaitingViewController</span><span class="p">];</span>
    <span class="p">}</span> <span class="n">withTimeout</span><span class="o">:</span><span class="mi">3</span><span class="p">];</span>
<span class="p">}</span></code></pre></div>

<div class="note note-hint">
  <p><strong>A NOTE ON THREADING:</strong> The thread calling the block of code is guaranteed to be the main thread.  If the code inside of the block requires executing on a background thread you will need to implement this logic.</p>
  <p>If the first playlist has already been downloaded when this call is made this becomes a blocking call and the block of code is executed immediately.</p>
</div>

<h2 id="name-your-views">Name your views</h2>
<p>Each UIView class contains the Apple property 'tag' allowing you to uniquely identify a view with an NSInteger value.  The Artisan SDK adds the property artisanNameTag to all UIView classes through the use if an Objective-C category.</p>

<p>If the artisanNameTag property is assigned the Artisan platform will use the artisanNameTag instead of the generated name for the view as it appears in the Artisan Canvas and in analytic reports.</p>

<div class="highlight"><pre><code class="objective-c"><span class="n">button</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIButton</span> <span class="n">buttonWithType</span><span class="o">:</span><span class="n">UIButtonTypeCustom</span><span class="p">];</span>
<span class="n">button</span><span class="p">.</span><span class="n">artisanNameTag</span> <span class="o">=</span> <span class="s">@&quot;Add Button&quot;</span><span class="p">;</span>

<span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="n">addSubview</span><span class="o">:</span><span class="n">button</span><span class="p">];</span></code></pre></div>

<div class="note note-hint">
  <p>Hint: Using a unique artisanNameTag for UIViews enables the targeting of specific UI changes made with the Artisan Canvas.  This works well for dynamic views that may or may not appear every time a particular screen is displayed.</p>
</div>

<h2 id="name-your-view-controllers">Name your view controllers</h2>
<p>The Artisan SDK adds the property artisanNameTag to all UIViewController classes through the use of an Objective-C category.</p>

<p>If the artisanNameTag property is assigned the Artisan platform will use the artisanNameTag instead of the generated name when displaying the view controller while building an experiment and in analytic reports.</p>

<div class="highlight"><pre><code class="objective-c"><span class="n">self</span><span class="p">.</span><span class="n">artisanNameTag</span> <span class="o">=</span> <span class="s">@&quot;Login Screen&quot;</span><span class="p">;</span></code></pre></div>


      </article>
    </section>
  </div>
</div>
<footer>
	<div id="footer" class="wrapper">Copyright  Artisan Mobile, Inc. All rights reserved.</div>
</footer>

<script type="text/javascript" charset="utf-8">
	$(document).ready(function() {
		function toStickOrNotToStick () {
			wHeight = $(window).height();
			navHeight = $("#nav-wrapper").outerHeight(true);

			if(wHeight > navHeight ) {
				if($('#category-nav .sticky-wrapper').length == 0) {
					$('#category-nav #nav-wrapper').waypoint('sticky');
				}
			} else {
				$('#category-nav #nav-wrapper').waypoint('unsticky');
			}

			if($('#category-nav').is(':hidden')) {
				$('#category-nav #nav-wrapper').waypoint('unsticky');	
			}
		}

		$(window).resize(function() {
			toStickOrNotToStick();
		});

		toStickOrNotToStick();
	})
</script>
</body>
</html>