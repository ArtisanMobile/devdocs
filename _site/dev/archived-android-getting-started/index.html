<!DOCTYPE html>
<html>
<head>
	<title>Quickstart for Android</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta http-equiv="imagetoolbar" content="false">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<meta name="author" content="Artisan Mobile" />
	<meta name="description" content="Getting started with the Artisan MEM platform for developers." />
	<meta name="keywords" content="" />

	<meta name="twitter:card" content="summary" />
	<meta name="twitter:url" content="http://dev.useartisan.com" />
	<meta name="twitter:title" content="Quickstart for Android" />
	<meta name="twitter:description" content="Getting started with the Artisan MEM platform for developers." />
	<meta name="twitter:site" content="@artisanmobile" />
	<meta name="twitter:image" content="http://dev.useartisan.com/images/twitter-card-image.png" />

	<meta property="og:site_name" content="Artisan Developers" />
	<meta property="og:title" content="Quickstart for Android" />
	<meta property="og:type" content="article" />
	<meta property="og:article:author" content="Kevin M. Jackson" />
	<meta property="og:url" content="http://dev.useartisan.com" />
  
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script src="/js/waypoints.min.js"></script>
	<script src="/js/waypoints-sticky.min.js"></script>
	<script type="text/javascript" src="//use.typekit.net/zqm4dpz.js"></script>
	<script type="text/javascript">try{Typekit.load();}catch(e){}</script>

	<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.2.0/base-min.css">
	<link rel="stylesheet" href="/docs.css?1392841087" type="text/css" media="screen" charset="utf-8">
</head>
<body>
<div id="header-wrapper">
	<nav>
		<ul id="primary-nav">
			<li><a href="/" title="" id="logo">
				<svg version="1.1" id="icon" fill="#ffffff" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="36px" width="36px" viewBox="0 0 144 144">
					<g>
						<path d="M11.001,97.171c12.574,0,21.169-8.989,26.592-14.575c-0.685,1.268-1.76,3.106-2.028,7.13c-0.343,5.146,2.883,7.41,6.523,7.41c11.756,0,21.49-15.313,26.176-20.028c3.151-3.17,4.429-3.686,7.166-3.686c1.515,0,2,1.4,2,2.468c0,4.489-7.395,10.992-7.395,15.779c0,3.286,2.102,5.503,7.392,5.503c8.67,0,16.73-7.361,18.731-9.294c-1.73,5.709,0.668,9.294,5.901,9.294c6.934,0,16.543-6.328,18.671-9.255c-0.95,4.409,0.461,9.255,6.01,9.255c5.165,0,10.585-3.469,17.261-9.328v-7.124c-5.301,4.903-9.864,8.877-12.489,8.877c-0.8,0-1.143-0.692-1.143-1.291c0-3.854,10.28-16.128,10.28-20.655c0-2.051-1.667-2.798-3.652-2.79c-2.535,0.01-4.433,0.689-6.143,2.992c-2.146,2.889-4.721,7.375-7.858,10.804c-5.518,6.033-11.253,10.61-14.825,10.61c-1.327,0-1.755-0.771-1.755-1.846c0-4.734,6.176-14.089,10.587-21.646c2.807,0.052,4.836,0.116,5.122,0.116c1.937,0,4.656-0.839,4.656-3.007c0-1.772-1.272-2.949-3.701-2.949c-0.142,0-1.253,0.032-2.968,0.069c0.773-1.667,1.249-3.067,1.249-4.053c0-2.164-0.864-4.023-3.485-3.974c-2.524,0.047-5.582,2.392-8.99,8.136c-5.198-0.027-10.569-0.179-11.096-0.178c-2.483,0-4.674,0.907-4.674,3.094c0,2.082,1.188,2.863,3.499,2.863c0.334,0,4.361-0.109,9.246-0.159c-1.829,3.412-4.306,7.692-7.173,11.688c-4.651,6.479-11.596,11.916-15.848,11.916c-1.344,0-1.607-0.869-1.607-1.723c0-3.468,8.203-11.075,8.203-17.023c0-4.28-4.111-5.701-9.468-5.701c-7.307,0-10.27,1.476-15.537,8.155c-6.085,7.717-14.254,15.772-16.664,15.772c-0.734,0-0.69-1.003-0.645-1.334c0.647-4.726,8.411-14.897,8.756-20.074c0.286-4.287-5.133-5.817-9.356-2.197c-0.778,0.667-20.761,23.426-30.816,23.426c-2.227,0-3.5-1.071-3.5-4.08c0-10.111,15.907-30.34,33.532-30.34c8.127,0,8.339,1.667,12.401,1.667c2.846,0,4.268-1.581,4.268-3.371c0-5.239-6.555-5.683-11.577-5.683C27.471,46.829,0,67.646,0,85.769C0,94.921,6.029,97.171,11.001,97.171z"/>
						<path d="M138.128,55.695c0,2.164,1.623,4.103,4.181,4.103c0.596,0,1.161-0.063,1.691-0.179V50.15c-0.059-0.002-0.108-0.015-0.168-0.015C141.424,50.135,138.128,51.694,138.128,55.695z"/>
					</g>
					<path d="M141,3v138H3V3H141 M144,0H0v144h144V0L144,0z"/>
				</svg>
			</a></li>
			<li><a href="/user-guide" title="">Getting Started</a></li>
			<li><a href="/dev/ios/install" title="">iOS Developers</a></li>
			<li><a href="/dev/android/install" title="">Android Developers</a></li>
		</ul>

		<ul id="extra-links">
			<li><a href="http://useartisan.com" title="">Artisan Home</a></li>
			<li><a href="http://useartisan.com/blog" title="">Blog</a></li>
		</ul>
	</nav>
</div>
<div id="main">
  <div class="main-wrapper">
    <section>
      <aside id="category-nav">
        <div id="nav-wrapper">
          





        </div>
      </aside>
      <article>
        <h1 id="artisan-quickstart-guide-for-android">Artisan Quickstart Guide for Android</h1>

<h2 id="prerequisites">Prerequisites</h2>
<ul>
  <li>Android App with a minimum SDK of no less than Android 2.3.3 (API 10) and build against the latest Android SDK.</li>
</ul>

<div class="note note-hint">
If you are upgrading from an older version of Artisan please see the <a href="/dev/android-upgrade/">Artisan upgrade instructions</a>.
</div>

<h2 id="adding-artisan-to-your-app">Adding Artisan to Your App</h2>

<h3 id="option-1-automatically-instrumenting-your-app-with-artisan">Option 1: Automatically Instrumenting your App with Artisan</h3>

<p>Artisan comes bundled with an installer that will configure Eclipse and add the necessary files to your source root. It will also edit your AndroidManifest.xml to point to the ArtisanService that is needed to instrument your Artisan application. For most cases, we recommend using the installer, but if you prefer to configure the project yourself, please skip forward to the next section.</p>

<p>1. Download the Install Wizard - You can download the Install Wizard by clicking on your App's Settings icon and click the Download SDK link</p>

<p>2. Extract the contents of YOUR_APP_NAME-ArtisanInstaller.zip into your project's root directory.</p>

<p>3. In a terminal, go to the artisan directory inside your project's root directory and run:</p>

<ul>
  <li>install.bat (on Windows)</li>
  <li>sh install.sh (on Mac/OSX or linux)</li>
</ul>

<p>This will update your manifest file, add the <strong>artisan_library.jar</strong> to your libs directory and create an Application class, if one doesn't exist already.</p>

<p>If there are any settings in your application's manifest that are not compatible with Artisan you will be notified and the installer will not complete. For example, you must specify a minimum Android SDK of 2.3.3 or higher. Change the specified settings and run the Artisan installer again.</p>

<div class="note note-hint">
<p>If you are using Eclipse, you'll need to refresh the project in Eclipse so that the newly added files are pulled into the project. Right click on your project and choose "Refresh".</p>
</div>

<div id="artisan-application"></div>
<p>4. If you already have an Application class you will need to update it to extend com.artisan.application.ArtisanApplication or implement com.artisan.application.ArtisanRegisteredApplication.</p>

<p>The ArtisanRegisteredApplication has three required methods on it: <strong>registerUserProfileVariables</strong>, <strong>registerPowerhooks</strong>, and <strong>registerInCodeExperiments</strong>.</p>

<p>You will also need to call ArtisanManager.startArtisan in the onCreate of your Application class. Replace “YOUR_ARTISAN_APPID_HERE” with the appropriate string. You can find your app id in Artisan Tools on the screen after you first create your app or on the settings page for your app:</p>

<div class="highlight"><pre><code class="java"><span class="kn">import</span> <span class="nn">com.artisan.application.ArtisanApplication</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">com.artisan.manager.ArtisanManager</span><span class="o">;</span>

    <span class="c1">// Extend ArtisanApplication or implement ArtisanRegisteredApplication</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MySampleApplication</span> <span class="kd">extends</span> <span class="n">ArtisanApplication</span> <span class="o">{</span>

      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">();</span>

        <span class="n">ArtisanManager</span><span class="o">.</span><span class="na">startArtisan</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">&quot;YOUR_ARTISAN_APPID_HERE&quot;</span><span class="o">);</span>
      <span class="o">}</span>


    <span class="cm">/**</span>
<span class="cm">     * Register your Artisan Power Hook variables and Power Hook blocks here</span>
<span class="cm">     *</span>
<span class="cm">     * For example:</span>
<span class="cm">     *</span>
<span class="cm">     * PowerHookManager.registerVariable(&quot;WelcomeText&quot;, &quot;Welcome Text Sample PowerHook&quot;, &quot;Welcome to Artisan!&quot;);</span>
<span class="cm">     *</span>
<span class="cm">     * &lt;code&gt;</span>
<span class="cm">     *  HashMap&lt;String, String&gt; defaultData = new HashMap&lt;String, String&gt;();</span>
<span class="cm">     *  defaultData.put(&quot;discountCode&quot;, &quot;012345ABC&quot;);</span>
<span class="cm">     *  defaultData.put(&quot;discountAmount&quot;, &quot;25%&quot;);</span>
<span class="cm">     *  defaultData.put(&quot;shouldDisplay&quot;, &quot;true&quot;);</span>
<span class="cm">     *</span>
<span class="cm">     *  PowerHookManager.registerBlock(&quot;showAlert&quot;, &quot;Show Alert Block&quot;, defaultData, new ArtisanBlock() {</span>
<span class="cm">     *    public void execute(Map&lt;String, String&gt; data, Map&lt;String, Object&gt; extraData) {</span>
<span class="cm">     *      if (&quot;true&quot;.equalsIgnoreCase(data.get(&quot;shouldDisplay&quot;))) {</span>
<span class="cm">     *        StringBuilder message = new StringBuilder();</span>
<span class="cm">     *        message.append(&quot;Buy another for a friend! Use discount code &quot;);</span>
<span class="cm">     *        message.append(data.get(&quot;discountCode&quot;));</span>
<span class="cm">     *        message.append(&quot; to get &quot;);</span>
<span class="cm">     *        message.append(data.get(&quot;discountAmount&quot;));</span>
<span class="cm">     *        message.append(&quot; off your purchase of 2 or more!&quot;);</span>
<span class="cm">     *        Toast.makeText((Context) extraData.get(&quot;context&quot;), message, Toast.LENGTH_LONG).show();</span>
<span class="cm">     *      }</span>
<span class="cm">     *    }</span>
<span class="cm">     * });</span>
<span class="cm">     * &lt;/code&gt;</span>
<span class="cm">     *</span>
<span class="cm">     * More examples at http://docs.useartisan.com/dev/quickstart-for-android/#power-hooks</span>
<span class="cm">     *</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">registerPowerhooks</span><span class="o">()</span> <span class="o">{</span>

    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Register your Artisan In-code Experiments here</span>
<span class="cm">     *</span>
<span class="cm">     * For example:</span>
<span class="cm">     *</span>
<span class="cm">     * ArtisanExperimentManager.registerExperiment(&quot;my first experiment&quot;);</span>
<span class="cm">     * ArtisanExperimentManager.addVariantForExperiment(&quot;blue variation&quot;, &quot;my first experiment&quot;);</span>
<span class="cm">     * ArtisanExperimentManager.addVariantForExperiment(&quot;green variation&quot;, &quot;my first experiment&quot;);</span>
<span class="cm">     *</span>
<span class="cm">     * More examples at http://docs.useartisan.com/dev/quickstart-for-android/#in-code</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">registerInCodeExperiments</span><span class="o">()</span> <span class="o">{</span>

    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Register your Artisan In-code Experiments here</span>
<span class="cm">     *</span>
<span class="cm">     * For example:</span>
<span class="cm">     *</span>
<span class="cm">     * ArtisanProfileManager.registerDateTime(&quot;lastSeenAt&quot;, new Date());</span>
<span class="cm">     * ArtisanProfileManager.registerLocation(&quot;lastKnownLocation&quot;);</span>
<span class="cm">     * ArtisanProfileManager.registerNumber(&quot;totalOrderCount&quot;, ArtisanDemoApplication.totalOrderCount);</span>
<span class="cm">     * ArtisanProfileManager.registerString(&quot;visitorType&quot;, &quot;anonymous&quot;);</span>
<span class="cm">     * ArtisanProfileManager.setGender(Gender.Female);</span>
<span class="cm">     * ArtisanProfileManager.setUserAge(29);</span>
<span class="cm">     * ArtisanProfileManager.setSharedUserId(&quot;abcdef123456789&quot;);</span>
<span class="cm">     * ArtisanProfileManager.setUserAddress(&quot;234 Market Street, Philadelphia, PA 19106&quot;);</span>
<span class="cm">     *</span>
<span class="cm">     * More examples at http://docs.useartisan.com/dev/quickstart-for-android/#api</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">registerUserProfileVariables</span><span class="o">()</span> <span class="o">{</span>

    <span class="o">}</span></code></pre></div>

<div id="artisan-activity"></div>
<p>5. Update all of your activities to extend the ArtisanActivity or implement our interface ArtisanBoundActivity</p>

<p>In order for your app to be properly instrumented all of your activities need to either extend ArtisanActivity or implement the ArtisanBoundActivity interface.</p>

<p>The simpler option is to extend ArtisanActivity. There’s nothing else you need to do if you are extending from ArtisanActivity.</p>

<p>Sample Activity that extends ArtisanActivity:</p>

<div class="highlight"><pre><code class="java"><span class="kn">import</span> <span class="nn">com.artisan.activity.ArtisanActivity</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseActivity</span> <span class="kd">extends</span> <span class="n">ArtisanActivity</span> <span class="o">{</span>
  <span class="o">...</span>
<span class="o">}</span></code></pre></div>

<p>If you are already extending a third party Activity or don’t wish to extend the ArtisanActivity you have the alternative of implementing our interface instead.</p>

<p>If you do, you must also make sure to add implementations for each of these methods and call the respective ArtisanActivity static method:
* implement <strong>protected void onCreate(Bundle savedInstanceState)</strong> and call <strong>ArtisanActivity.artisanOnCreate(this)</strong>
* implement <strong>protected void onStart()</strong> and call <strong>ArtisanActivity.artisanOnStart(this)</strong>
* implement <strong>protected void onStop()</strong> and call <strong>ArtisanActivity.artisanOnStop(this)</strong>
* implement <strong>protected void onDestroy()</strong> and call <strong>ArtisanActivity.artisanOnDestroy()</strong>
* implement <strong>public void setContentView(int layoutResID)</strong> if you are using this version of setContentView for this Activity or its subclasses and get the contentView from <strong>ArtisanActivity.artisanGetContentView(layoutResID, this)</strong> and pass that in to super.setContentView(View)
* implement <strong>public void setContentView(View view)</strong> if you are using this version of setContentView for this Activity or its subclasses and get the contentview from <strong>ArtisanActivity.artisanGetContentView(view, this)</strong> and pass that in to super.setContentView(View)
* implement <strong>public void setContentView(View view, LayoutParams params)</strong> if you are using this version of setContentView for this Activity or its subclasses and get the contentView from <strong>ArtisanActivity.artisanGetContentView(view, params, this)</strong> and pass that in to super.setContentView(View)
* implement <strong>public ArtisanService getArtisanService()</strong> and return <strong>ArtisanActivity._getArtisanService()</strong></p>

<p>Sample Activity that implements ArtisanBoundActivity:</p>

<div class="highlight"><pre><code class="java"><span class="kn">import</span> <span class="nn">android.app.Activity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.View</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.artisan.activity.ArtisanActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.artisan.services.ArtisanBoundActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.artisan.services.ArtisanService</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SampleArtisanCustomerActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="kd">implements</span> <span class="n">ArtisanBoundActivity</span> <span class="o">{</span>

	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
		<span class="n">ArtisanActivity</span><span class="o">.</span><span class="na">artisanOnCreate</span><span class="o">(</span><span class="k">this</span><span class="o">);</span> <span class="c1">// Call Artisan method AFTER super.onCreate</span>
		<span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_absolute_layout</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onStart</span><span class="o">()</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">.</span><span class="na">onStart</span><span class="o">();</span>
		<span class="n">ArtisanActivity</span><span class="o">.</span><span class="na">artisanOnStart</span><span class="o">(</span><span class="k">this</span><span class="o">);</span> <span class="c1">// Call Artisan method AFTER super.onStart</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onStop</span><span class="o">()</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">.</span><span class="na">onStop</span><span class="o">();</span>
		<span class="n">ArtisanActivity</span><span class="o">.</span><span class="na">artisanOnStop</span><span class="o">(</span><span class="k">this</span><span class="o">);</span> <span class="c1">// Call Artisan method AFTER super.onStop</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onDestroy</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">ArtisanActivity</span><span class="o">.</span><span class="na">artisanOnDestroy</span><span class="o">();</span> <span class="c1">// Call Artisan method BEFORE super.onDestroy</span>
		<span class="kd">super</span><span class="o">.</span><span class="na">onDestroy</span><span class="o">();</span>
	<span class="o">}</span>

        <span class="cm">/**</span>
<span class="cm">         * This is the version of setContentView that most people use.</span>
<span class="cm">         * You only need to implement this if you are using this version of setContentView in this Activity or its subclasses.</span>
<span class="cm">         * If you are using it it looks something like this:</span>
<span class="cm">         * setContentView(R.layout.activity_main);</span>
<span class="cm">         */</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setContentView</span><span class="o">(</span><span class="kt">int</span> <span class="n">layoutResID</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">View</span> <span class="n">contentView</span> <span class="o">=</span> <span class="n">ArtisanActivity</span><span class="o">.</span><span class="na">artisanGetContentView</span><span class="o">(</span><span class="n">layoutResID</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
		<span class="kd">super</span><span class="o">.</span><span class="na">setContentView</span><span class="o">(</span><span class="n">contentView</span><span class="o">);</span>
	<span class="o">}</span>

        <span class="c1">// You only need to implement this if you are using this version of setContentView in this Activity or its subclasses.</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setContentView</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">View</span> <span class="n">contentView</span> <span class="o">=</span> <span class="n">ArtisanActivity</span><span class="o">.</span><span class="na">artisanGetContentView</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
		<span class="kd">super</span><span class="o">.</span><span class="na">setContentView</span><span class="o">(</span><span class="n">contentView</span><span class="o">);</span>
	<span class="o">}</span>

        <span class="c1">// You only need to implement this if you are using this version of setContentView in this Activity or its subclasses.</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setContentView</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">,</span> <span class="n">LayoutParams</span> <span class="n">params</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">View</span> <span class="n">contentView</span> <span class="o">=</span> <span class="n">ArtisanActivity</span><span class="o">.</span><span class="na">artisanGetContentView</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">params</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
		<span class="kd">super</span><span class="o">.</span><span class="na">setContentView</span><span class="o">(</span><span class="n">contentView</span><span class="o">);</span>
	<span class="o">}</span>

        <span class="cm">/**</span>
<span class="cm">         * This method is required by the ArtisanBoundActivity interface.</span>
<span class="cm">         * You can copy this implementation as is to your Activities that extend our interface.</span>
<span class="cm">         */</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="n">ArtisanService</span> <span class="nf">getArtisanService</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">ArtisanActivity</span><span class="o">.</span><span class="na">_getArtisanService</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></div>

<div class="note note-important">
If you are using ProGuard please see the <a href="/dev/proguard-for-android/">Artisan ProGuard configuration instructions</a>.
</div>

<p><strong>Congratulations! You are now ready to start using Artisan!</strong></p>

<p>Now that the SDK is installed in your app we need to connect it to Artisan. Connecting your app verifies that the SDK has been installed correctly and that your app can communicate with the Artisan platform. See the getting started notification in Artisan Tools to connect your device.</p>

<p>You can also get started using the <a href="#api">Artisan API</a>.</p>

<p>Want to know more about what the Android SDK can do? See <a href="/dev/developing-with-artisan/#android">Developing with Artisan</a>.</p>

<div id="manual"></div>
<p>###Option 2: Manually Adding the Artisan SDK to your App</p>

<p>If you prefer to manually install Artisan, follow these steps, including: copying the Artisan jar to your libs, setting up the Artisan Service and updating your activities.</p>

<p>1. Download the Artisan Android SDK - You can download the SDK by clicking on your App's Settings icon and click the Download SDK link</p>

<p>2. Extract the contents of the SDK .zip file into your project's root directory.</p>

<p>3. Copy all Android resources from 'artisan/androidResources/res' to your project's 'res' directory. Be sure to keep the subfolder structure intact.</p>

<p>4. Copy all Android resources from 'artisan/androidResources/assets' to your project's 'assets' directory.</p>

<p>5. Copy artisan/artisan_library/artisan_library.jar to your project’s libs directory</p>

<h4 id="configuring-artisan">Configuring Artisan</h4>

<p>Artisan is configured in your Application class.</p>

<p>If you don’t already have an Applicaton class, create one and add it to your manifest (the classname goes in the android:name parameter of your &lt;application&gt; node of your AndroidManifest.xml).</p>

<p>1. Update your application class to extend com.artisan.application.ArtisanActivity or implement com.artisan.application.ArtisanRegisteredApplication.</p>

<p>You will need to call ArtisanManager.startArtisan in the onCreate of your Application class. Replace “YOUR_ARTISAN_APPID_HERE” with the appropriate string. You can find your app id in Artisan Tools on the screen after you first create your app or on the settings page for your app:</p>

<div class="highlight"><pre><code class="java"><span class="kn">import</span> <span class="nn">com.artisan.application.ArtisanApplication</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">com.artisan.manager.ArtisanManager</span><span class="o">;</span>

    <span class="c1">// Extend ArtisanApplication or implement ArtisanRegisteredApplication</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MySampleApplication</span> <span class="kd">extends</span> <span class="n">ArtisanApplication</span> <span class="o">{</span>

      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">();</span>

        <span class="n">ArtisanManager</span><span class="o">.</span><span class="na">startArtisan</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">&quot;YOUR_ARTISAN_APPID_HERE&quot;</span><span class="o">);</span>
      <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Register your Artisan Power Hook variables and Power Hook blocks here</span>
<span class="cm">     *</span>
<span class="cm">     * For example:</span>
<span class="cm">     *</span>
<span class="cm">     * PowerHookManager.registerVariable(&quot;WelcomeText&quot;, &quot;Welcome Text Sample PowerHook&quot;, &quot;Welcome to Artisan!&quot;);</span>
<span class="cm">     *</span>
<span class="cm">     * &lt;code&gt;</span>
<span class="cm">     *  HashMap&lt;String, String&gt; defaultData = new HashMap&lt;String, String&gt;();</span>
<span class="cm">     *  defaultData.put(&quot;discountCode&quot;, &quot;012345ABC&quot;);</span>
<span class="cm">     *  defaultData.put(&quot;discountAmount&quot;, &quot;25%&quot;);</span>
<span class="cm">     *  defaultData.put(&quot;shouldDisplay&quot;, &quot;true&quot;);</span>
<span class="cm">     *</span>
<span class="cm">     *  PowerHookManager.registerBlock(&quot;showAlert&quot;, &quot;Show Alert Block&quot;, defaultData, new ArtisanBlock() {</span>
<span class="cm">     *    public void execute(Map&lt;String, String&gt; data, Map&lt;String, Object&gt; extraData) {</span>
<span class="cm">     *      if (&quot;true&quot;.equalsIgnoreCase(data.get(&quot;shouldDisplay&quot;))) {</span>
<span class="cm">     *        StringBuilder message = new StringBuilder();</span>
<span class="cm">     *        message.append(&quot;Buy another for a friend! Use discount code &quot;);</span>
<span class="cm">     *        message.append(data.get(&quot;discountCode&quot;));</span>
<span class="cm">     *        message.append(&quot; to get &quot;);</span>
<span class="cm">     *        message.append(data.get(&quot;discountAmount&quot;));</span>
<span class="cm">     *        message.append(&quot; off your purchase of 2 or more!&quot;);</span>
<span class="cm">     *        Toast.makeText((Context) extraData.get(&quot;context&quot;), message, Toast.LENGTH_LONG).show();</span>
<span class="cm">     *      }</span>
<span class="cm">     *    }</span>
<span class="cm">     * });</span>
<span class="cm">     * &lt;/code&gt;</span>
<span class="cm">     *</span>
<span class="cm">     * More examples at http://docs.useartisan.com/dev/quickstart-for-android/#power-hooks</span>
<span class="cm">     *</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">registerPowerhooks</span><span class="o">()</span> <span class="o">{</span>

    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Register your Artisan In-code Experiments here</span>
<span class="cm">     *</span>
<span class="cm">     * For example:</span>
<span class="cm">     *</span>
<span class="cm">     * ArtisanExperimentManager.registerExperiment(&quot;my first experiment&quot;);</span>
<span class="cm">     * ArtisanExperimentManager.addVariantForExperiment(&quot;blue variation&quot;, &quot;my first experiment&quot;);</span>
<span class="cm">     * ArtisanExperimentManager.addVariantForExperiment(&quot;green variation&quot;, &quot;my first experiment&quot;);</span>
<span class="cm">     *</span>
<span class="cm">     * More examples at http://docs.useartisan.com/dev/quickstart-for-android/#in-code</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">registerInCodeExperiments</span><span class="o">()</span> <span class="o">{</span>

    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Register your Artisan In-code Experiments here</span>
<span class="cm">     *</span>
<span class="cm">     * For example:</span>
<span class="cm">     *</span>
<span class="cm">     * ArtisanProfileManager.registerDateTime(&quot;lastSeenAt&quot;, new Date());</span>
<span class="cm">     * ArtisanProfileManager.registerLocation(&quot;lastKnownLocation&quot;);</span>
<span class="cm">     * ArtisanProfileManager.registerNumber(&quot;totalOrderCount&quot;, ArtisanDemoApplication.totalOrderCount);</span>
<span class="cm">     * ArtisanProfileManager.registerString(&quot;visitorType&quot;, &quot;anonymous&quot;);</span>
<span class="cm">     * ArtisanProfileManager.setGender(Gender.Female);</span>
<span class="cm">     * ArtisanProfileManager.setUserAge(29);</span>
<span class="cm">     * ArtisanProfileManager.setSharedUserId(&quot;abcdef123456789&quot;);</span>
<span class="cm">     * ArtisanProfileManager.setUserAddress(&quot;234 Market Street, Philadelphia, PA 19106&quot;);</span>
<span class="cm">     *</span>
<span class="cm">     * More examples at http://docs.useartisan.com/dev/quickstart-for-android/#api</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">registerUserProfileVariables</span><span class="o">()</span> <span class="o">{</span>

    <span class="o">}</span></code></pre></div>

<p>2. In addition to updating your Application class you will need to update all of your activities.</p>

<p>In order for your app to be properly instrumented with Artisan all of your activities need to either extend ArtisanActivity or implement the ArtisanBoundActivity interface.</p>

<p>The simplest option is to extend ArtisanActivity. There’s nothing else you need to do if you are extending from ArtisanActivity.</p>

<p>Sample Activity that extends ArtisanActivity:</p>

<div class="highlight"><pre><code class="java"><span class="kn">import</span> <span class="nn">com.artisan.activity.ArtisanActivity</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseActivity</span> <span class="kd">extends</span> <span class="n">ArtisanActivity</span> <span class="o">{</span>
  <span class="o">...</span>
<span class="o">}</span></code></pre></div>

<p>If you are already extending a third party Activity or don’t wish to extend the ArtisanActivity you have the alternative of implementing our interface instead.</p>

<p>If you do, you must also make sure to add implementations for each of these methods and call the respective ArtisanActivity static method:
* implement <strong>protected void onCreate(Bundle savedInstanceState)</strong> and call <strong>ArtisanActivity.artisanOnCreate(this)</strong>
* implement <strong>protected void onStart()</strong> and call <strong>ArtisanActivity.artisanOnStart(this)</strong>
* implement <strong>protected void onStop()</strong> and call <strong>ArtisanActivity.artisanOnStop(this)</strong>
* implement <strong>protected void onDestroy()</strong> and call <strong>ArtisanActivity.artisanOnDestroy()</strong>
* implement <strong>public void setContentView(int layoutResID)</strong> if you are using this version of setContentView for this Activity or its subclasses and get the contentView from <strong>ArtisanActivity.artisanGetContentView(layoutResID, this)</strong> and pass that in to super.setContentView(View)
* implement <strong>public void setContentView(View view)</strong> if you are using this version of setContentView for this Activity or its subclasses and get the contentview from <strong>ArtisanActivity.artisanGetContentView(view, this)</strong> and pass that in to super.setContentView(View)
* implement <strong>public void setContentView(View view, LayoutParams params)</strong> if you are using this version of setContentView for this Activity or its subclasses and get the contentView from <strong>ArtisanActivity.artisanGetContentView(view, params, this)</strong> and pass that in to super.setContentView(View)
* implement <strong>public ArtisanService getArtisanService()</strong> and return <strong>ArtisanActivity._getArtisanService()</strong></p>

<p>Sample Activity that implements ArtisanBoundActivity:</p>

<div class="highlight"><pre><code class="java"><span class="kn">import</span> <span class="nn">android.app.Activity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.View</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.artisan.activity.ArtisanActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.artisan.services.ArtisanBoundActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.artisan.services.ArtisanService</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SampleArtisanCustomerActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="kd">implements</span> <span class="n">ArtisanBoundActivity</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
    <span class="n">ArtisanActivity</span><span class="o">.</span><span class="na">artisanOnCreate</span><span class="o">(</span><span class="k">this</span><span class="o">);</span> <span class="c1">// Call Artisan method AFTER super.onCreate</span>
    <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_absolute_layout</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onStart</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onStart</span><span class="o">();</span>
    <span class="n">ArtisanActivity</span><span class="o">.</span><span class="na">artisanOnStart</span><span class="o">(</span><span class="k">this</span><span class="o">);</span> <span class="c1">// Call Artisan method AFTER super.onStart</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onStop</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onStop</span><span class="o">();</span>
    <span class="n">ArtisanActivity</span><span class="o">.</span><span class="na">artisanOnStop</span><span class="o">(</span><span class="k">this</span><span class="o">);</span> <span class="c1">// Call Artisan method AFTER super.onStop</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onDestroy</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ArtisanActivity</span><span class="o">.</span><span class="na">artisanOnDestroy</span><span class="o">();</span> <span class="c1">// Call Artisan method BEFORE super.onDestroy</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onDestroy</span><span class="o">();</span>
  <span class="o">}</span>

        <span class="cm">/**</span>
<span class="cm">         * This is the version of setContentView that most people use.</span>
<span class="cm">         * You only need to implement this if you are using this version of setContentView in this Activity or its subclasses.</span>
<span class="cm">         * If you are using it it looks something like this:</span>
<span class="cm">         * setContentView(R.layout.activity_main);</span>
<span class="cm">         */</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setContentView</span><span class="o">(</span><span class="kt">int</span> <span class="n">layoutResID</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">View</span> <span class="n">contentView</span> <span class="o">=</span> <span class="n">ArtisanActivity</span><span class="o">.</span><span class="na">artisanGetContentView</span><span class="o">(</span><span class="n">layoutResID</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">setContentView</span><span class="o">(</span><span class="n">contentView</span><span class="o">);</span>
  <span class="o">}</span>

        <span class="c1">// You only need to implement this if you are using this version of setContentView in this Activity or its subclasses.</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setContentView</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">View</span> <span class="n">contentView</span> <span class="o">=</span> <span class="n">ArtisanActivity</span><span class="o">.</span><span class="na">artisanGetContentView</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">setContentView</span><span class="o">(</span><span class="n">contentView</span><span class="o">);</span>
  <span class="o">}</span>

        <span class="c1">// You only need to implement this if you are using this version of setContentView in this Activity or its subclasses.</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setContentView</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">,</span> <span class="n">LayoutParams</span> <span class="n">params</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">View</span> <span class="n">contentView</span> <span class="o">=</span> <span class="n">ArtisanActivity</span><span class="o">.</span><span class="na">artisanGetContentView</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">params</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">setContentView</span><span class="o">(</span><span class="n">contentView</span><span class="o">);</span>
  <span class="o">}</span>

        <span class="cm">/**</span>
<span class="cm">         * This method is required by the ArtisanBoundActivity interface.</span>
<span class="cm">         * You can copy this implementation as is to your Activities that extend our interface.</span>
<span class="cm">         */</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">ArtisanService</span> <span class="nf">getArtisanService</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">ArtisanActivity</span><span class="o">.</span><span class="na">_getArtisanService</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></div>

<p>3. The last step is updating your AndroidManifest.xml so that Android knows where to find the service and has the correct permissions. Add the following line inside the <code>&lt;application&gt;</code> element.</p>

<div class="highlight"><pre><code class="java"><span class="o">&lt;</span><span class="n">service</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;com.artisan.services.ArtisanService&quot;</span><span class="o">/&gt;</span></code></pre></div>

<p>You will also need to add the following permissions to your AndroidManifest.xml if they aren't already set:</p>

<div class="highlight"><pre><code class="java"><span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;android.permission.READ_PHONE_STATE&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;android.permission.GET_TASKS&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;android.permission.INTERNET&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span><span class="o">/&gt;</span></code></pre></div>

<p><strong>Congratulations! You are now ready to start using Artisan!</strong></p>

<p>Now that the SDK is installed in your app we need to connect it to Artisan. Connecting your app verifies that the SDK has been installed correctly and that your app can communicate with the Artisan platform. See the getting started notification in Artisan Tools to connect your device.</p>

<p>Want to know more about what the Android SDK can do? See <a href="/dev/developing-with-artisan/#android">Developing with Artisan</a>.</p>

<div id="api"></div>
<p>##Getting Started with the Artisan API</p>

<h2 id="analytics">Analytics</h2>

<p>Artisan automatically collects analytics events for every user, session, and page view. There’s nothing you need to add to your app to capture those analytics.</p>

<p>But, there are likely actions that your users take in your app that you’d like to record for analytics and experiment goals. To capture these custom analytics events we have the ArtisanTrackingManager class in our API.</p>

<p>ArtisanTrackingManager manages all in-code analytics tracking designed for use with Artisan, to allow you to track custom views and events.</p>

<div class="highlight"><pre><code class="java"><span class="n">ArtisanTrackingManager</span><span class="o">.</span><span class="na">trackEvent</span><span class="o">(</span><span class="s">&quot;Product Purchased&quot;</span><span class="o">);</span></code></pre></div>

<p>with an optional dictionary of name/value pairs.</p>

<div class="highlight"><pre><code class="java"><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">parameters</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;();</span>
<span class="n">parameters</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;sku&quot;</span><span class="o">,</span> <span class="s">&quot;A0123456789&quot;</span><span class="o">);</span>
<span class="n">parameters</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;product name&quot;</span><span class="o">,</span> <span class="s">&quot;Artisan Developer T-Shirt&quot;</span><span class="o">);</span>
<span class="n">ArtisanTrackingManager</span><span class="o">.</span><span class="na">trackEvent</span><span class="o">(</span><span class="s">&quot;Product Purchased&quot;</span><span class="o">,</span> <span class="n">parameters</span><span class="o">);</span></code></pre></div>

<div class="note note-hint">
<p>As an alternative to having to manually add code to track all analytics events we provide the <a href="/dev/android-aspectj/">Artisan Auto-Instrumentation with AspectJ</a> version of the Android SDK.</p>
</div>

<h2 id="user-profile">User Profile</h2>

<p>ArtisanProfileManager is a singleton that is automatically initialized when your app starts. Use ArtisanProfileManager to manage the personalization profile for the current user from app inception to completion.</p>

<h3 id="register-user-profile-variables">Register User Profile Variables</h3>

<p>Convenience methods existing for registering numbers, strings, dates, and locations. The value can optionally be set during the registration of the User Profile Variable.</p>

<p>This declaration should occur in the <strong>registerUserProfileVariables</strong> method of your Application class.</p>

<div class="highlight"><pre><code class="java"><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">registerUserProfileVariables</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">ArtisanProfileManager</span><span class="o">.</span><span class="na">registerDateTime</span><span class="o">(</span><span class="s">&quot;lastSeenAt&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">Date</span><span class="o">());</span>
  <span class="n">ArtisanProfileManager</span><span class="o">.</span><span class="na">registerLocation</span><span class="o">(</span><span class="s">&quot;lastKnownLocation&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">ArtisanLocationValue</span><span class="o">(</span><span class="mf">39.949920</span><span class="o">,-</span><span class="mf">75.145102</span><span class="o">));</span>
  <span class="n">ArtisanProfileManager</span><span class="o">.</span><span class="na">registerNumber</span><span class="o">(</span><span class="s">&quot;totalOrderCount&quot;</span><span class="o">,</span> <span class="mi">9</span><span class="o">);</span>
  <span class="n">ArtisanProfileManager</span><span class="o">.</span><span class="na">registerString</span><span class="o">(</span><span class="s">&quot;memberType&quot;</span><span class="o">,</span> <span class="s">&quot;gold&quot;</span><span class="o">);</span>
<span class="o">}</span></code></pre></div>

<p>For numeric values you can pass in any java.lang.Number type</p>

<div class="highlight"><pre><code class="java"><span class="n">ArtisanProfileManager</span><span class="o">.</span><span class="na">registerNumber</span><span class="o">(</span><span class="s">&quot;currentCartTotal double&quot;</span><span class="o">,</span> <span class="mf">146.99</span><span class="o">);</span> <span class="c1">// double</span>
<span class="n">ArtisanProfileManager</span><span class="o">.</span><span class="na">registerNumber</span><span class="o">(</span><span class="s">&quot;currentCartTotal float&quot;</span><span class="o">,</span> <span class="mf">146.99f</span><span class="o">);</span> <span class="c1">// float</span>
<span class="n">ArtisanProfileManager</span><span class="o">.</span><span class="na">registerNumber</span><span class="o">(</span><span class="s">&quot;currentCartTotal int&quot;</span><span class="o">,</span> <span class="mi">146</span><span class="o">);</span> <span class="c1">// int</span></code></pre></div>

<div class="note note-hint">
  <p>Hint: Valid characters for variable names include [0-9], [a-z], [A-Z], -, and _. Any other characters will automatically be stripped out.</p>
</div>

<h3 id="update-user-profile-variables">Update User Profile Variables</h3>

<p>The updating of the User Profile Variable can be accomplished by calling the matching setter for the User Variable Variable data type.</p>

<div class="highlight"><pre><code class="java"><span class="n">ArtisanProfileManager</span><span class="o">.</span><span class="na">setStringValue</span><span class="o">(</span><span class="s">&quot;memberType&quot;</span><span class="o">,</span> <span class="s">&quot;platinum&quot;</span><span class="o">);</span>
<span class="n">ArtisanProfileManager</span><span class="o">.</span><span class="na">setDateTimeValue</span><span class="o">(</span><span class="s">&quot;lastSeenAt&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">Date</span><span class="o">());</span>
<span class="n">ArtisanProfileManager</span><span class="o">.</span><span class="na">setLocationValue</span><span class="o">(</span><span class="s">&quot;lastKnownLocation&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">ArtisanLocationValue</span><span class="o">(</span><span class="mf">39.949920</span><span class="o">,</span> <span class="o">-</span><span class="mf">75.145102</span><span class="o">));</span>
<span class="n">ArtisanProfileManager</span><span class="o">.</span><span class="na">setNumberValue</span><span class="o">(</span><span class="s">&quot;totalOrderCount&quot;</span><span class="o">,</span> <span class="mi">9</span><span class="o">);</span></code></pre></div>

<h3 id="clear-user-profile-variables">Clear User Profile Variables</h3>

<p>The <strong>clearProfile</strong> method will clear out the values associated with the registered User Profile Variables.</p>

<div class="highlight"><pre><code class="java"><span class="n">ArtisanProfileManager</span><span class="o">.</span><span class="na">clearProfile</span><span class="o">();</span></code></pre></div>

<h3 id="setting-the-shared-user-id">Setting the shared user Id</h3>
<p>The <strong>sharedUserId</strong> User Profile Variable is used to uniquely indentify an app user.</p>

<div class="note note-important">
  <p>Important: The sharedUserId should NOT be any of the following: email address, phone number, or social security number.  The sharedUserId should uniquely identify the user in your system.</p>
</div>

<div class="highlight"><pre><code class="java"><span class="n">ArtisanProfileManager</span><span class="o">.</span><span class="na">setSharedUserId</span><span class="o">(</span><span class="s">&quot;abcdef123456789&quot;</span><span class="o">);</span></code></pre></div>

<h3 id="user-profile-variables-for-advanced-targeting">User Profile Variables for Advanced Targeting</h3>

<p>The methods <strong>setGender</strong>, <strong>setUserAge</strong>, and <strong>setUserAddress</strong> can all be used like any other User Profile Variable for Advanced Targeting in Artisan Experiments. These dimensions can also be used for creating segments and reporting.</p>

<p>The <strong>setGender</strong> method expects one of the following enum values: Gender.Female, Gender.Male, Gender.NA or nil (from <strong>com.artisan.incodeapi.ArtisanProfileManager.Gender</strong>);</p>

<div class="highlight"><pre><code class="java"><span class="n">ArtisanProfileManager</span><span class="o">.</span><span class="na">setGender</span><span class="o">(</span><span class="n">Gender</span><span class="o">.</span><span class="na">Female</span><span class="o">);</span></code></pre></div>

<p>The <strong>setUserAge</strong> method expects an Integer or int.</p>

<div class="highlight"><pre><code class="java"><span class="n">ArtisanProfileManager</span><span class="o">.</span><span class="na">setUserAge</span><span class="o">(</span><span class="mi">29</span><span class="o">);</span></code></pre></div>

<p>The <strong>setUserAddress</strong> method expects a String.</p>

<div class="highlight"><pre><code class="java"><span class="n">ArtisanProfileManager</span><span class="o">.</span><span class="na">setUserAddress</span><span class="o">(</span><span class="s">&quot;234 Market Street, Philadelphia, PA 19106&quot;</span><span class="o">);</span></code></pre></div>

<div id="power-hooks"></div>
<p>##Power Hooks</p>

<p>Power Hooks are key-value pairs or code blocks with key-value arguments that are passed into your application code by Artisan when your app starts, allowing for settings, text, and logic to be modified on the fly for all user devices without revisioning or updating your application.</p>

<p>All hooks are created using PowerHookManager are automatically registered with the Artisan platform when you connect your device to for the first time. The registration process will detect all registered hook keys, and will display all of the hook variables and code blocks for this app in Artisan where they can be edited.  Values set on hooks on the web will automatically be downloaded by all devices upon app startup, allowing for their usage throughout your system code.</p>

<h3 id="power-hook-variables">Power Hook Variables</h3>

<p>Register a single-value Power Hook for use with Artisan.</p>

<p>Use the method <strong>registerVariable(String hookId, String friendlyName, String defaultValue)</strong> to declare the existence of a Power Hook you would like to pass in from Artisan.</p>

<p>This declaration should occur in the <strong>registerPowerhooks</strong> method of your Application class</p>

<div class="highlight"><pre><code class="java"><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">registerPowerhooks</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">PowerHookManager</span><span class="o">.</span><span class="na">registerVariable</span><span class="o">(</span><span class="s">&quot;addToCartButton&quot;</span><span class="o">,</span> <span class="s">&quot;Add To Cart Button Text&quot;</span><span class="o">,</span> <span class="s">&quot;Buy Now&quot;</span><span class="o">);</span>
  <span class="o">...</span>
<span class="o">}</span></code></pre></div>

<p>The method <strong>getVariableValue</strong> retrieves the value of a Power Hook from Artisan.  This will return the value specified in the Artisan platform, or the default value if none has been specified.</p>

<div class="highlight"><pre><code class="java"><span class="n">Button</span> <span class="n">cart_button</span> <span class="o">=</span> <span class="o">(</span><span class="n">Button</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">AddToCartButton</span><span class="o">);</span>
<span class="n">cart_button</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">PowerHookManager</span><span class="o">.</span><span class="na">getVariableValue</span><span class="o">(</span><span class="s">&quot;addToCartButton&quot;</span><span class="o">));</span></code></pre></div>

<div class="note note-important">
  <p>NOTE: If you request the value for this Power Hook Variable in your first Activity's onCreate method, before the Artisan Service has a chance to start up, you may get a null value in return. The Artisan Service is started up at the time your first activity is created, and should be ready by the time your first activity gets to onResume. For the rest of your application's lifecycle you can assume that Power Hooks will work as expected.</p>
</div>

<div class="note note-hint">
  <p>HINT: Each time your code passes over a <strong>getVariableValue</strong> method call the most recently downloaded value to the user's device will be referenced.  If you do not want the value to change during the life-cycle of the object you can assign the value to a variable.</p>
</div>

<h3 id="power-hook-code-blocks">Power Hook Code Blocks</h3>

<p>Use the <strong>registerBlock(String blockId, String friendlyName, Map&lt;String, String&gt; defaultData, ArtisanBlock block)</strong> method to declare the existence of a code block you would like to use in your app with data that is configurable from Artisan.</p>

<p>This declaration should occur in the <strong>registerPowerhooks</strong> method of your Application class</p>

<ul>
  <li><strong>blockId</strong> - The name of the block to register. Name must be unique for this app.</li>
  <li><strong>friendlyName</strong> - The name for this code block that will be displayed in Artisan Tools.</li>
  <li><strong>defaultData</strong> - The default data for this code block. This should be string keys and values. This data will be used if no data is passed in from Artisan Tools for this code block for this app.</li>
  <li><strong>block</strong> - The block of code executed when executeBlock is called.</li>
</ul>

<div class="note note-hint">
  <p>Hint: The ArtisanBlock execute method takes in two Maps. The <strong>data</strong> Map will include either the default data that you passed in when you registered, or updated data from Artisan. The Map <strong>extraData</strong> is data that you will pass in when you call executeBlock. This is often used to pass in an Android Context, like in the example below. Although, extraData can also be used to pass in any information that is relevant from wherever this block will be exectued, like the optional productName variable in the example below.</p>
</div>

<div class="highlight"><pre><code class="java"><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">registerPowerhooks</span><span class="o">()</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">defaultData</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;();</span>
  <span class="n">defaultData</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;discountCode&quot;</span><span class="o">,</span> <span class="s">&quot;012345ABC&quot;</span><span class="o">);</span>
  <span class="n">defaultData</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;discountAmount&quot;</span><span class="o">,</span> <span class="s">&quot;25%&quot;</span><span class="o">);</span>
  <span class="n">defaultData</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;shouldDisplay&quot;</span><span class="o">,</span> <span class="s">&quot;true&quot;</span><span class="o">);</span>

  <span class="n">PowerHookManager</span><span class="o">.</span><span class="na">registerBlock</span><span class="o">(</span><span class="s">&quot;showAlert&quot;</span><span class="o">,</span> <span class="s">&quot;Show Alert Block&quot;</span><span class="o">,</span> <span class="n">defaultData</span><span class="o">,</span> <span class="k">new</span> <span class="n">ArtisanBlock</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">data</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">extraData</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="s">&quot;true&quot;</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;shouldDisplay&quot;</span><span class="o">)))</span> <span class="o">{</span>
        <span class="n">StringBuilder</span> <span class="n">message</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">extraData</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;productName&quot;</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">message</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;Buy another &quot;</span><span class="o">);</span>
          <span class="n">message</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;productName&quot;</span><span class="o">));</span>
          <span class="n">message</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot; for a friend! &quot;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">message</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;Use discount code &quot;</span><span class="o">);</span>
        <span class="n">message</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;discountCode&quot;</span><span class="o">));</span>
        <span class="n">message</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot; to get &quot;</span><span class="o">);</span>
        <span class="n">message</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;discountAmount&quot;</span><span class="o">));</span>
        <span class="n">message</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot; off your next purchase!&quot;</span><span class="o">);</span>
        <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">((</span><span class="n">Context</span><span class="o">)</span> <span class="n">extraData</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;context&quot;</span><span class="o">),</span> <span class="n">message</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">});</span>
<span class="o">}</span></code></pre></div>

<p>Use the method <strong>executeBlock(String blockId)</strong> or <strong>executeBlock(String blockId, Map&lt;String, Object&gt; extraData)</strong> to execute a Power Hook code block from Artisan. The code block will use the values specified in the data parameter registered in ArtisanTools.com to execute the block. You can override the default data using ArtisanTools.com.</p>

<p>Power Hook code blocks can be used for referencing code that can be executed conditionally. Examples are displaying a modal popup to remind the user to perform certain actions in the app, managing the logic for applying a discount code, or displaying a survey to a segment of users.</p>

<ul>
  <li><strong>blockId</strong> - The name of the code to register. Name must be unique for this app.</li>
  <li><strong>extraData</strong> - Additional data to use when executing this block. If you need a context to execute your block, you can pass one in here.</li>
</ul>

<p>Sample usage of a Power Hook Block (from the onClick handler for an add to cart button):</p>

<div class="highlight"><pre><code class="java"><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">extraData</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
<span class="n">extraData</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;productName&quot;</span><span class="o">,</span> <span class="s">&quot;Artisan Andy Plush Toy&quot;</span><span class="o">);</span>
<span class="n">extraData</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;context&quot;</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
<span class="n">PowerHookManager</span><span class="o">.</span><span class="na">executeBlock</span><span class="o">(</span><span class="s">&quot;showAlert&quot;</span><span class="o">,</span> <span class="n">extraData</span><span class="o">);</span></code></pre></div>

<div class="note note-important">
  <p>NOTE: If you execute this Power Hook Block in your first Activity's onCreate method, before the Artisan Service has a chance to start up, the call may be ignored. The Artisan Service is started up at the time your first activity is created, and should be ready by the time your first activity gets to onResume. For the rest of your application's lifecycle you can assume that Power Hooks will work as expected.</p>
</div>

<div id="in-code"></div>
<p>##In-code Experiments</p>

<p>In-code Experiments allow you to build tests around business logic inside your app.  For example, you can create a test for showing or not showing a particular screen.  Another example is testing multiple workflows.</p>

<p>An in-code experiments must be defined in the <strong>registerInCodeExperiments</strong> on your Application class.</p>

<p>The method <strong>registerExperimentWithDescription(String experimentName)</strong> or <strong>registerExperimentWithDescription(String experimentName, String description)</strong> takes a string representing the name of your experiment and an optional string for a description that will be displayed in Artisan Tools.</p>

<div class="highlight"><pre><code class="java"><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">registerInCodeExperiments</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">ArtisanExperimentManager</span><span class="o">.</span><span class="na">registerExperiment</span><span class="o">(</span><span class="s">&quot;Cart Process&quot;</span><span class="o">,</span> <span class="s">&quot;Skip or don&#39;t skip the product detail page&quot;</span><span class="o">);</span>
  <span class="o">...</span>
<span class="o">}</span></code></pre></div>

<p>Next, register each variant by name with the experiment with <strong>addVariantForExperiment(String variantName, String experimentName)</strong> or <strong>addVariantForExperiment(String variantName, String experimentName, boolean isDefault)</strong>.
* <strong>variantName</strong> The name of the variant to add. This needs to be unique for the experiment.
* <strong>experimentName</strong> The name of the experiment to which this variant should be added. This needs to be the name a variant previously created via <strong>registerExperiment</strong>.
* <strong>isDefault</strong> Sets whether this variant is the default. The default variant will be used in instances where the experiment is not active (i.e. completed or not yet published). If no variant is marked as the default the first variant you add will be the default.</p>

<div class="highlight"><pre><code class="java"><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">registerInCodeExperiments</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">ArtisanExperimentManager</span><span class="o">.</span><span class="na">registerExperiment</span><span class="o">(</span><span class="s">&quot;Cart Process&quot;</span><span class="o">,</span> <span class="s">&quot;Skip or don&#39;t skip the product detail page&quot;</span><span class="o">);</span>
  <span class="n">ArtisanExperimentManager</span><span class="o">.</span><span class="na">addVariantForExperiment</span><span class="o">(</span><span class="s">&quot;Don&#39;t Skip Product Details&quot;</span><span class="o">,</span> <span class="s">&quot;Cart Process&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
  <span class="n">ArtisanExperimentManager</span><span class="o">.</span><span class="na">addVariantForExperiment</span><span class="o">(</span><span class="s">&quot;Skip Product Details&quot;</span><span class="o">,</span> <span class="s">&quot;Cart Process&quot;</span><span class="o">);</span>
<span class="o">}</span></code></pre></div>

<div class="note note-important">
  <p>Important: If the experiment is not running the default variant will be selected.</p>
</div>

<p>Call the method <strong>setExperimentViewedForExperiment(String experimentName)</strong> to mark the experiment has been viewed for the current user session. This call should be made at the location within the code where you want to mark the experiment as viewed.</p>

<p>Use the method <strong>isCurrentVariantForExperiment(String variantName, String experimentName)</strong> to determine which experiment variation is active.</p>

<div class="highlight"><pre><code class="java"><span class="n">ArtisanExperimentManager</span><span class="o">.</span><span class="na">setExperimentViewedForExperiment</span><span class="o">(</span><span class="s">&quot;Buy Button Test&quot;</span><span class="o">);</span>

<span class="k">if</span> <span class="o">(</span><span class="n">ArtisanExperimentManager</span><span class="o">.</span><span class="na">isCurrentVariantForExperiment</span><span class="o">(</span><span class="s">&quot;button says add to cart&quot;</span><span class="o">,</span> <span class="s">&quot;Buy Button Test&quot;</span><span class="o">))</span> <span class="o">{</span>
  <span class="n">textView</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&quot;Add to Cart&quot;</span><span class="o">);</span>
<span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">ArtisanExperimentManager</span><span class="o">.</span><span class="na">isCurrentVariantForExperiment</span><span class="o">(</span><span class="s">&quot;button says buy now&quot;</span><span class="o">,</span> <span class="s">&quot;Buy Button Test&quot;</span><span class="o">))</span> <span class="o">{</span>
  <span class="n">textView</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&quot;Buy Now!&quot;</span><span class="o">);</span>
<span class="o">}</span></code></pre></div>

<div class="note note-hint">
  <p>Hint: The logic for choosing the variant should generally be in the <strong>onResume</strong> method of your Activity or in a location where the code will be exercised each time the screen is displayed.  This is necessary so the test can be turned on and off without requiring the rebuilding of the screen.</p>
</div>

<p>To set the goal of an in-code experiment you call the <strong>setTargetReachedForExperiment(String experimentName)</strong> method.  This call should be made at the location within the code where you want to mark the goal as achieved.</p>

<div class="highlight"><pre><code class="java"><span class="n">ArtisanExperimentManager</span><span class="o">.</span><span class="na">setTargetReachedForExperiment</span><span class="o">(</span><span class="s">&quot;Buy Button Test&quot;</span><span class="o">);</span></code></pre></div>

<h2 id="javadoc">Javadoc</h2>

<p>For extensive javadoc for the Artisan API see <a href="/dev/android-javadocs">Android API Javadocs</a> for the version of the Artisan SDK that you are using.</p>

      </article>
    </section>
  </div>
</div>
<footer>
	<div id="footer" class="wrapper">Copyright  Artisan Mobile, Inc. All rights reserved.</div>
</footer>

<script type="text/javascript" charset="utf-8">
	$(document).ready(function() {
		function toStickOrNotToStick () {
			wHeight = $(window).height();
			navHeight = $("#nav-wrapper").outerHeight(true);

			if(wHeight > navHeight ) {
				if($('#category-nav .sticky-wrapper').length == 0) {
					$('#category-nav #nav-wrapper').waypoint('sticky');
				}
			} else {
				$('#category-nav #nav-wrapper').waypoint('unsticky');
			}

			if($('#category-nav').is(':hidden')) {
				$('#category-nav #nav-wrapper').waypoint('unsticky');	
			}
		}

		$(window).resize(function() {
			toStickOrNotToStick();
		});

		toStickOrNotToStick();
	})
</script>
</body>
</html>