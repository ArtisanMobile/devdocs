---
layout: docs
title: "Artisan iOS Installation"
author: "Artisan"
category: dev/android
description: "Installation instructions for the Artisan Android SDK"
---

# Artisan Android Installation

After creating your app in <a href="https://artisantools.com" target="_blank">artisantools.com</a> the easiest way to get Artisan into your Android project is to <a href="#manual">install Artisan manually</a> or use our <a href="#installer">installer script</a>.

##Prerequisites
* Android app with a minimum SDK of no less than Android 2.3.3 (API 10) and build against the latest Android SDK.

<div id="manual"></div>

##Manual Installation for Artisan Android SDK

If you prefer to manually install Artisan, follow these steps, including: copying the Artisan jar to your libs, setting up the Artisan Service and updating your activities.

1\. Download the Artisan Android SDK - You can download the SDK by clicking on your App\'s Settings icon and click the Download SDK link

2\. Extract the contents of the SDK .zip file into your project\'s root directory.

3\. Copy all Android resources from \'artisan/androidResources/res\' to your project\'s \'res\' directory. Be sure to keep the subfolder structure intact.

4\. Copy all Android resources from \'artisan/androidResources/assets\' to your project\'s \'assets\' directory.

5\. Copy artisan/artisan_library/artisan_library.jar to your project's libs directory

###Configuring Artisan

Artisan is configured in your Application class.

If you don't already have an Applicaton class, create one and add it to your manifest (the classname goes in the android:name parameter of your &lt;application&gt; node of your AndroidManifest.xml).

1\. Update your application class to extend com.artisan.application.ArtisanActivity or implement com.artisan.application.ArtisanRegisteredApplication.

You will need to call ArtisanManager.startArtisan in the onCreate of your Application class. Replace "YOUR_ARTISAN_APPID_HERE" with the appropriate string. You can find your app id in Artisan Tools on the screen after you first create your app or on the settings page for your app:

{% highlight java %}
    import com.artisan.application.ArtisanApplication;
    import com.artisan.manager.ArtisanManager;

    // Extend ArtisanApplication or implement ArtisanRegisteredApplication
    public class MySampleApplication extends ArtisanApplication {

      @Override
      public void onCreate() {
        super.onCreate();

        ArtisanManager.startArtisan(this, "YOUR_ARTISAN_APPID_HERE");
      }

    /**
     * Register your Artisan Power Hook variables and Power Hook blocks here
     *
     * For example:
     *
     * PowerHookManager.registerVariable("WelcomeText", "Welcome Text Sample PowerHook", "Welcome to Artisan!");
     *
     * <code>
     *  HashMap<String, String> defaultData = new HashMap<String, String>();
     *  defaultData.put("discountCode", "012345ABC");
     *  defaultData.put("discountAmount", "25%");
     *  defaultData.put("shouldDisplay", "true");
     *
     *  PowerHookManager.registerBlock("showAlert", "Show Alert Block", defaultData, new ArtisanBlock() {
     *    public void execute(Map<String, String> data, Map<String, Object> extraData) {
     *      if ("true".equalsIgnoreCase(data.get("shouldDisplay"))) {
     *        StringBuilder message = new StringBuilder();
     *        message.append("Buy another for a friend! Use discount code ");
     *        message.append(data.get("discountCode"));
     *        message.append(" to get ");
     *        message.append(data.get("discountAmount"));
     *        message.append(" off your purchase of 2 or more!");
     *        Toast.makeText((Context) extraData.get("context"), message, Toast.LENGTH_LONG).show();
     *      }
     *    }
     * });
     * </code>
     *
     * More examples at http://docs.useartisan.com/dev/quickstart-for-android/#power-hooks
     *
     */
    @Override
    public void registerPowerhooks() {

    }

    /**
     * Register your Artisan In-code Experiments here
     *
     * For example:
     *
     * ArtisanExperimentManager.registerExperiment("my first experiment");
     * ArtisanExperimentManager.addVariantForExperiment("blue variation", "my first experiment");
     * ArtisanExperimentManager.addVariantForExperiment("green variation", "my first experiment");
     *
     * More examples at http://docs.useartisan.com/dev/quickstart-for-android/#in-code
     */
    @Override
    public void registerInCodeExperiments() {

    }

    /**
     * Register your Artisan In-code Experiments here
     *
     * For example:
     *
     * ArtisanProfileManager.registerDateTime("lastSeenAt", new Date());
     * ArtisanProfileManager.registerLocation("lastKnownLocation");
     * ArtisanProfileManager.registerNumber("totalOrderCount", ArtisanDemoApplication.totalOrderCount);
     * ArtisanProfileManager.registerString("visitorType", "anonymous");
     * ArtisanProfileManager.setGender(Gender.Female);
     * ArtisanProfileManager.setUserAge(29);
     * ArtisanProfileManager.setSharedUserId("abcdef123456789");
     * ArtisanProfileManager.setUserAddress("234 Market Street, Philadelphia, PA 19106");
     *
     * More examples at http://docs.useartisan.com/dev/quickstart-for-android/#api
     */
    @Override
    public void registerUserProfileVariables() {

    }
{% endhighlight %}

2\. In addition to updating your Application class you will need to update all of your activities.

In order for your app to be properly instrumented with Artisan all of your activities need to either extend ArtisanActivity or implement the ArtisanBoundActivity interface.

The simplest option is to extend ArtisanActivity. There's nothing else you need to do if you are extending from ArtisanActivity.

Sample Activity that extends ArtisanActivity:
{% highlight java %}
import com.artisan.activity.ArtisanActivity;

public class BaseActivity extends ArtisanActivity {
  ...
}
{% endhighlight %}

If you are already extending a third party Activity or don't wish to extend the ArtisanActivity you have the alternative of implementing our interface instead.

If you do, you must also make sure to add implementations for each of these methods and call the respective ArtisanActivity static method:

* implement **protected void onCreate(Bundle savedInstanceState)** and call **ArtisanActivity.artisanOnCreate(this)**
* implement **protected void onStart()** and call **ArtisanActivity.artisanOnStart(this)**
* implement **protected void onStop()** and call **ArtisanActivity.artisanOnStop(this)**
* implement **protected void onDestroy()** and call **ArtisanActivity.artisanOnDestroy()**
* implement **public void setContentView(int layoutResID)** if you are using this version of setContentView for this Activity or its subclasses and get the contentView from **ArtisanActivity.artisanGetContentView(layoutResID, this)** and pass that in to super.setContentView(View)
* implement **public void setContentView(View view)** if you are using this version of setContentView for this Activity or its subclasses and get the contentview from **ArtisanActivity.artisanGetContentView(view, this)** and pass that in to super.setContentView(View)
* implement **public void setContentView(View view, LayoutParams params)** if you are using this version of setContentView for this Activity or its subclasses and get the contentView from **ArtisanActivity.artisanGetContentView(view, params, this)** and pass that in to super.setContentView(View)
* implement **public ArtisanService getArtisanService()** and return **ArtisanActivity._getArtisanService()**

Sample Activity that implements ArtisanBoundActivity:

{% highlight java %}
import android.app.Activity;
import android.os.Bundle;
import android.view.View;

import com.artisan.activity.ArtisanActivity;
import com.artisan.services.ArtisanBoundActivity;
import com.artisan.services.ArtisanService;

public class SampleArtisanCustomerActivity extends Activity implements ArtisanBoundActivity {

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ArtisanActivity.artisanOnCreate(this); // Call Artisan method AFTER super.onCreate
    setContentView(R.layout.activity_absolute_layout);
  }

  @Override
  protected void onStart() {
    super.onStart();
    ArtisanActivity.artisanOnStart(this); // Call Artisan method AFTER super.onStart
  }

  @Override
  protected void onStop() {
    super.onStop();
    ArtisanActivity.artisanOnStop(this); // Call Artisan method AFTER super.onStop
  }

  @Override
  protected void onDestroy() {
    ArtisanActivity.artisanOnDestroy(); // Call Artisan method BEFORE super.onDestroy
    super.onDestroy();
  }

        /**
         * This is the version of setContentView that most people use.
         * You only need to implement this if you are using this version of setContentView in this Activity or its subclasses.
         * If you are using it it looks something like this:
         * setContentView(R.layout.activity_main);
         */
  @Override
  public void setContentView(int layoutResID) {
    View contentView = ArtisanActivity.artisanGetContentView(layoutResID, this);
    super.setContentView(contentView);
  }

        // You only need to implement this if you are using this version of setContentView in this Activity or its subclasses.
  @Override
  public void setContentView(View view) {
    View contentView = ArtisanActivity.artisanGetContentView(view, this);
    super.setContentView(contentView);
  }

        // You only need to implement this if you are using this version of setContentView in this Activity or its subclasses.
  @Override
  public void setContentView(View view, LayoutParams params) {
    View contentView = ArtisanActivity.artisanGetContentView(view, params, this);
    super.setContentView(contentView);
  }

        /**
         * This method is required by the ArtisanBoundActivity interface.
         * You can copy this implementation as is to your Activities that extend our interface.
         */
  @Override
  public ArtisanService getArtisanService() {
    return ArtisanActivity._getArtisanService();
  }
}
{% endhighlight %}

3\. The last step is updating your AndroidManifest.xml so that Android knows where to find the service and has the correct permissions. Add the following line inside the `<application>` element.

{% highlight java %}
<service android:name="com.artisan.services.ArtisanService"/>
{% endhighlight %}

You will also need to add the following permissions to your AndroidManifest.xml if they aren\'t already set:

{% highlight java %}
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.GET_TASKS"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
{% endhighlight %}

**Congratulations! You are now ready to start using Artisan!**

Now that the SDK is installed in your app we need to connect it to Artisan. Connecting your app verifies that the SDK has been installed correctly and that your app can communicate with the Artisan platform. See the getting started notification in Artisan Tools to connect your device.

<hr size="1">
<div id="installer"></div>

##Automatic Installation for Artisan Android SDK

Artisan comes bundled with an installer that will configure Eclipse and add the necessary files to your source root. It will also edit your AndroidManifest.xml to point to the ArtisanService that is needed to instrument your Artisan application. For most cases, we recommend using the installer, but if you prefer to configure the project yourself, please skip forward to the next section.

1\. Download the Install Wizard - You can download the Install Wizard by clicking on your App\'s Settings icon and click the Download SDK link

2\. Extract the contents of YOUR_APP_NAME-ArtisanInstaller.zip into your project\'s root directory.

3\. In a terminal, go to the artisan directory inside your project\'s root directory and run:

* install.bat (on Windows)
* sh install.sh (on Mac/OSX or linux)

This will update your manifest file, add the **artisan_library.jar** to your libs directory and create an Application class, if one doesn\'t exist already.

If there are any settings in your application\'s manifest that are not compatible with Artisan you will be notified and the installer will not complete. For example, you must specify a minimum Android SDK of 2.3.3 or higher. Change the specified settings and run the Artisan installer again.

<div class="note note-hint">
<p>If you are using Eclipse, you'll need to refresh the project in Eclipse so that the newly added files are pulled into the project. Right click on your project and choose "Refresh".</p>
</div>

<div id="artisan-application"></div>
4\. If you already have an Application class you will need to update it to extend com.artisan.application.ArtisanApplication or implement com.artisan.application.ArtisanRegisteredApplication.

The ArtisanRegisteredApplication has three required methods on it: **registerUserProfileVariables**, **registerPowerhooks**, and **registerInCodeExperiments**.

You will also need to call ArtisanManager.startArtisan in the onCreate of your Application class. Replace "YOUR_ARTISAN_APPID_HERE" with the appropriate string. You can find your app id in Artisan Tools on the screen after you first create your app or on the settings page for your app:

{% highlight java %}
    import com.artisan.application.ArtisanApplication;
    import com.artisan.manager.ArtisanManager;

    // Extend ArtisanApplication or implement ArtisanRegisteredApplication
    public class MySampleApplication extends ArtisanApplication {

      @Override
      public void onCreate() {
        super.onCreate();

        ArtisanManager.startArtisan(this, "YOUR_ARTISAN_APPID_HERE");
      }


    /**
     * Register your Artisan Power Hook variables and Power Hook blocks here
     *
     * For example:
     *
     * PowerHookManager.registerVariable("WelcomeText", "Welcome Text Sample PowerHook", "Welcome to Artisan!");
     *
     * <code>
     *  HashMap<String, String> defaultData = new HashMap<String, String>();
     *  defaultData.put("discountCode", "012345ABC");
     *  defaultData.put("discountAmount", "25%");
     *  defaultData.put("shouldDisplay", "true");
     *
     *  PowerHookManager.registerBlock("showAlert", "Show Alert Block", defaultData, new ArtisanBlock() {
     *    public void execute(Map<String, String> data, Map<String, Object> extraData) {
     *      if ("true".equalsIgnoreCase(data.get("shouldDisplay"))) {
     *        StringBuilder message = new StringBuilder();
     *        message.append("Buy another for a friend! Use discount code ");
     *        message.append(data.get("discountCode"));
     *        message.append(" to get ");
     *        message.append(data.get("discountAmount"));
     *        message.append(" off your purchase of 2 or more!");
     *        Toast.makeText((Context) extraData.get("context"), message, Toast.LENGTH_LONG).show();
     *      }
     *    }
     * });
     * </code>
     *
     * More examples at http://docs.useartisan.com/dev/quickstart-for-android/#power-hooks
     *
     */
    @Override
    public void registerPowerhooks() {

    }

    /**
     * Register your Artisan In-code Experiments here
     *
     * For example:
     *
     * ArtisanExperimentManager.registerExperiment("my first experiment");
     * ArtisanExperimentManager.addVariantForExperiment("blue variation", "my first experiment");
     * ArtisanExperimentManager.addVariantForExperiment("green variation", "my first experiment");
     *
     * More examples at http://docs.useartisan.com/dev/quickstart-for-android/#in-code
     */
    @Override
    public void registerInCodeExperiments() {

    }

    /**
     * Register your Artisan In-code Experiments here
     *
     * For example:
     *
     * ArtisanProfileManager.registerDateTime("lastSeenAt", new Date());
     * ArtisanProfileManager.registerLocation("lastKnownLocation");
     * ArtisanProfileManager.registerNumber("totalOrderCount", ArtisanDemoApplication.totalOrderCount);
     * ArtisanProfileManager.registerString("visitorType", "anonymous");
     * ArtisanProfileManager.setGender(Gender.Female);
     * ArtisanProfileManager.setUserAge(29);
     * ArtisanProfileManager.setSharedUserId("abcdef123456789");
     * ArtisanProfileManager.setUserAddress("234 Market Street, Philadelphia, PA 19106");
     *
     * More examples at http://docs.useartisan.com/dev/quickstart-for-android/#api
     */
    @Override
    public void registerUserProfileVariables() {

    }
{% endhighlight %}

<div id="artisan-activity"></div>
5\. Update all of your activities to extend the ArtisanActivity or implement our interface ArtisanBoundActivity

In order for your app to be properly instrumented all of your activities need to either extend ArtisanActivity or implement the ArtisanBoundActivity interface.

The simpler option is to extend ArtisanActivity. There's nothing else you need to do if you are extending from ArtisanActivity.

Sample Activity that extends ArtisanActivity:
{% highlight java %}
import com.artisan.activity.ArtisanActivity;

public class BaseActivity extends ArtisanActivity {
  ...
}
{% endhighlight %}

If you are already extending a third party Activity or don't wish to extend the ArtisanActivity you have the alternative of implementing our interface instead.

If you do, you must also make sure to add implementations for each of these methods and call the respective ArtisanActivity static method:

* implement **protected void onCreate(Bundle savedInstanceState)** and call **ArtisanActivity.artisanOnCreate(this)**
* implement **protected void onStart()** and call **ArtisanActivity.artisanOnStart(this)**
* implement **protected void onStop()** and call **ArtisanActivity.artisanOnStop(this)**
* implement **protected void onDestroy()** and call **ArtisanActivity.artisanOnDestroy()**
* implement **public void setContentView(int layoutResID)** if you are using this version of setContentView for this Activity or its subclasses and get the contentView from **ArtisanActivity.artisanGetContentView(layoutResID, this)** and pass that in to super.setContentView(View)
* implement **public void setContentView(View view)** if you are using this version of setContentView for this Activity or its subclasses and get the contentview from **ArtisanActivity.artisanGetContentView(view, this)** and pass that in to super.setContentView(View)
* implement **public void setContentView(View view, LayoutParams params)** if you are using this version of setContentView for this Activity or its subclasses and get the contentView from **ArtisanActivity.artisanGetContentView(view, params, this)** and pass that in to super.setContentView(View)
* implement **public ArtisanService getArtisanService()** and return **ArtisanActivity._getArtisanService()**

Sample Activity that implements ArtisanBoundActivity:

{% highlight java %}
import android.app.Activity;
import android.os.Bundle;
import android.view.View;

import com.artisan.activity.ArtisanActivity;
import com.artisan.services.ArtisanBoundActivity;
import com.artisan.services.ArtisanService;

public class SampleArtisanCustomerActivity extends Activity implements ArtisanBoundActivity {

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ArtisanActivity.artisanOnCreate(this); // Call Artisan method AFTER super.onCreate
    setContentView(R.layout.activity_absolute_layout);
  }

  @Override
  protected void onStart() {
    super.onStart();
    ArtisanActivity.artisanOnStart(this); // Call Artisan method AFTER super.onStart
  }

  @Override
  protected void onStop() {
    super.onStop();
    ArtisanActivity.artisanOnStop(this); // Call Artisan method AFTER super.onStop
  }

  @Override
  protected void onDestroy() {
    ArtisanActivity.artisanOnDestroy(); // Call Artisan method BEFORE super.onDestroy
    super.onDestroy();
  }

        /**
         * This is the version of setContentView that most people use.
         * You only need to implement this if you are using this version of setContentView in this Activity or its subclasses.
         * If you are using it it looks something like this:
         * setContentView(R.layout.activity_main);
         */
  @Override
  public void setContentView(int layoutResID) {
    View contentView = ArtisanActivity.artisanGetContentView(layoutResID, this);
    super.setContentView(contentView);
  }

        // You only need to implement this if you are using this version of setContentView in this Activity or its subclasses.
  @Override
  public void setContentView(View view) {
    View contentView = ArtisanActivity.artisanGetContentView(view, this);
    super.setContentView(contentView);
  }

        // You only need to implement this if you are using this version of setContentView in this Activity or its subclasses.
  @Override
  public void setContentView(View view, LayoutParams params) {
    View contentView = ArtisanActivity.artisanGetContentView(view, params, this);
    super.setContentView(contentView);
  }

        /**
         * This method is required by the ArtisanBoundActivity interface.
         * You can copy this implementation as is to your Activities that extend our interface.
         */
  @Override
  public ArtisanService getArtisanService() {
    return ArtisanActivity._getArtisanService();
  }
}
{% endhighlight %}

<div class="note note-important">
If you are using ProGuard please see the <a href="/dev/android/install/proguard/">Artisan ProGuard configuration instructions</a>.
</div>

**Congratulations! You are now ready to start using Artisan!**

Now that the SDK is installed in your app we need to connect it to Artisan. Connecting your app verifies that the SDK has been installed correctly and that your app can communicate with the Artisan platform. See the getting started notification in Artisan Tools to connect your device.
